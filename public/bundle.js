(()=>{"use strict";var t,e,n={5222:(t,e,n)=>{n(4114),n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197);const o=[],r=[];class i{constructor(t,e){this.x=t,this.y=e}}class s{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.radiusX=t,this.radiusY=e,this.rotation=n}scale(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.radiusX*=t,this.radiusY*=e}}class a extends s{constructor(t){super(t,t),this.radius=t}setRadius(t){super.scale(t/this.radius),this.radius=t}}class c{ratio=1;constructor(t,e){this.width=t,this.height=e,this.ratio=t/e}scale(t){this.width*=t,this.height*=t}}class l{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;this.lineOneLength=t,this.lineTwoLength=e,this.lineWidth=n}scale(t){this.lineOneLength*=t,this.lineTwoLength*=t,this.lineWidth*=t}}class h{fill=!0;stroke=!0;fillRule="nonzero";display=!0;lineCap="butt";lineJoin="miter";miterLimit=10;constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.position=t.position??new i(0,0),this.shape=t.shape??new a(10),this.fillStyle=t.fillStyle,this.strokeStyle=t.strokeStyle,this.strokeWidth=t.strokeWidth,this.fill=t.fill??!0,this.stroke=t.stroke??!0,this.fillRule=t.fillRule??"nonzero",this.display=t.display??!0,this.lineCap=t.lineCap??"butt",this.lineJoin=t.lineJoin??"miter",this.miterLimit=t.miterLimit??10}draw(t,e,n){this.display&&function(t,e){if(t.display){if(e.beginPath(),t.fillStyle&&(e.fillStyle=t.fillStyle),t.strokeStyle&&(e.strokeStyle=t.strokeStyle),t.strokeWidth&&(e.lineWidth=t.strokeWidth),t.lineCap&&(e.lineCap=t.lineCap),t.lineJoin&&(e.lineJoin=t.lineJoin),t.miterLimit&&(e.miterLimit=t.miterLimit),t.shape instanceof s)e.ellipse(t.position.x,t.position.y,t.shape.radiusX,t.shape.radiusY,t.shape.rotation,0,2*Math.PI);else if(t.shape instanceof c)e.rect(t.position.x-t.shape.width/2,t.position.y-t.shape.height/2,t.shape.width,t.shape.height);else if(t.shape instanceof l){e.lineJoin="round";let n=Math.sqrt(2),o=t.shape.lineOneLength/n,r=t.shape.lineTwoLength/n;e.moveTo(t.position.x-o/2,t.position.y-o/2),e.lineTo(t.position.x+o/2,t.position.y+o/2),e.moveTo(t.position.x-r/2,t.position.y+r/2),e.lineTo(t.position.x+r/2,t.position.y-r/2)}else console.log("Unknown shape:",t.shape);t.fill&&(e.closePath(),e.fill(t.fillRule)),t.stroke&&e.stroke()}}(this,t)}remove(){o.filter((t=>t!==this)),r.filter((t=>t!==this))}}function u(t,e){if(e.shape instanceof a)return(t.x-e.position.x)**2+(t.y-e.position.y)**2<e.shape.radius**2;if(e.shape instanceof s){const n=new i((t.x-e.position.x)*Math.cos(-e.shape.rotation)-(t.y-e.position.y)*Math.sin(-e.shape.rotation),(t.x-e.position.x)*Math.sin(-e.shape.rotation)+(t.y-e.position.y)*Math.cos(-e.shape.rotation));return(n.x/e.shape.radiusX)**2+(n.y/e.shape.radiusY)**2<=1}if(e.shape instanceof c)return t.x>=e.position.x-e.shape.width/2&&t.x<=e.position.x+e.shape.width/2&&t.y>=e.position.y-e.shape.height/2&&t.y<=e.position.y+e.shape.height/2;if(e.shape instanceof l){let n=Math.max(e.shape.lineOneLength,e.shape.lineTwoLength)/2;return(t.x-e.position.x)**2+(t.y-e.position.y)**2<n**2}}function p(t,e){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}n(6573),n(8100),n(7936),n(7467),n(4732),n(9577);let d=[];class f{constructor(t,e,n,o){this.name=t,this.render_color=e,this.chemical_formula=n,this.relative_abundance=o/5,d.push(this)}}new f("Gold","#FFD700","Au",1),new f("Iron","#D4D7D8","Fe",4),new f("Copper","#B76B1E","Cu",3),new f("Silver","#C0C0C0","Ag",2),new f("Diamond","#FFF","C",1);class y extends h{hovering=!1;listeners={};isMapElement=!1;constructor(t){super(t),this.isMapElement=t.isMapElement??!1,v.push(this)}addEventListener(t,e,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}removeEventListener(t,e,n){this.listeners[t].filter((t=>t!==e))}dispatchEvent(t){return!!this.listeners[t.type]&&(this.listeners[t.type].forEach((e=>e(t))),!0)}remove(){super.remove(),v.splice(v.indexOf(this),1)}}const v=[],g=[];function m(t,e,n){for(let o of g)o.draw(t,e,n)}const x={WATER_THRESHOLD:.35,MOUNTAIN_THRESHOLD:.75,UPHILL_MAX_SLOPE:.7,UPHILL_MIN_SPEED:.05,DOWNHILL_BOOST_LIMIT:.2,DOWNHILL_MAX_SLOPE:.58,DOWNHILL_MAX_BOOST:3,DOWNHILL_MIN_SPEED:.15,PIXELS_TO_METERS:15,HEIGHT_RANGE:1500},w=.01,b={SHOW_PATH_LOGS:!1,SHOW_TERRAIN_LOGS:!1,DRAW_TERRAIN_GRID:!1};let E=null;function P(t){if(!E?.heightMap?.data)return b.SHOW_TERRAIN_LOGS&&console.warn("World map or height map data not initialized for terrain utilities"),.5;const e=E.heightMap.data,n=e.length,o=e[0]?.length;if(!o||0===n)return.5;const r=Math.round(t.x),i=Math.round(t.y),s=Math.max(0,Math.min(r,o-1)),a=Math.max(0,Math.min(i,n-1)),c=e[a]?.[s];return c??.5}function S(t){return E?.heightMap?.data?!(P(t)<x.WATER_THRESHOLD):(b.SHOW_TERRAIN_LOGS&&console.warn("World map or height map data not initialized for terrain utilities"),!0)}function T(t,e){const n=P(t),o=P(e),r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))*x.PIXELS_TO_METERS;if(0===r)return 0;const i=(o-n)*x.HEIGHT_RANGE/r;return b.SHOW_TERRAIN_LOGS&&Math.abs(i)>.2&&console.log(`Slope from (${t.x.toFixed(1)}, ${t.y.toFixed(1)}) to (${e.x.toFixed(1)}, ${e.y.toFixed(1)}): ${i.toFixed(2)}`),i}function M(t){const{UPHILL_MAX_SLOPE:e,UPHILL_MIN_SPEED:n,DOWNHILL_BOOST_LIMIT:o,DOWNHILL_MAX_SLOPE:r,DOWNHILL_MAX_BOOST:i,DOWNHILL_MIN_SPEED:s}=x;if(t>0)return t>=e?0:1-t/e*(1-n);{const e=Math.abs(t);return e<o?1+e/o*(i-1):e<r?i-(e-o)/(r-o)*(i-s):0}}function O(t,e){const n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return Math.max(n,o)+(Math.SQRT2-1)*Math.min(n,o)}function _(t,e){return t.x===e.x&&t.y===e.y}function A(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e5;b.SHOW_PATH_LOGS&&console.log(`Finding path from (${t.x.toFixed(1)}, ${t.y.toFixed(1)}) to (${e.x.toFixed(1)}, ${e.y.toFixed(1)})`);const o={x:Math.round(t.x),y:Math.round(t.y)},r={x:Math.round(e.x),y:Math.round(e.y)};if(_(o,r))return[{x:o.x,y:o.y}];if(!S(o)||!S(r))return b.SHOW_PATH_LOGS&&console.warn(`Start grid pos (${o.x}, ${o.y}) or end grid pos (${r.x}, ${r.y}) is impassable (water).`),null;const i=[],s=new Set,a=new Map,c=t=>`${t.x},${t.y}`,l=[{x:0,y:1},{x:1,y:0},{x:0,y:-1},{x:-1,y:0},{x:1,y:1},{x:1,y:-1},{x:-1,y:-1},{x:-1,y:1}],h={x:r.x-o.x,y:r.y-o.y},u=Math.sqrt(h.x*h.x+h.y*h.y);u>0&&(h.x/=u,h.y/=u,l.sort(((t,e)=>{const n=t.x*h.x+t.y*h.y;return e.x*h.x+e.y*h.y-n})));const p=O(o,r),d={position:{x:o.x,y:o.y},gCost:0,hCost:p,fCost:p,parent:null};i.push(d),a.set(c(o),d);let f=0;const y=8*n;for(;i.length>0&&f<y;){f++;let n=0;for(let t=1;t<i.length;t++)i[t].fCost<i[n].fCost&&(n=t);const o=i[n];i.splice(n,1);const h=c(o.position);if(s.add(h),_(o.position,r)){b.SHOW_PATH_LOGS&&console.log(`Path found after ${f} iterations`);const n=[];let r=o;for(;null!==r;)n.push({x:r.position.x,y:r.position.y}),r=r.parent;return n.reverse(),n.length>0&&(n[0]={x:t.x,y:t.y},n[n.length-1]={x:e.x,y:e.y}),n}for(const t of l){const e={x:o.position.x+t.x,y:o.position.y+t.y},n=c(e);if(s.has(n))continue;if(!S(e))continue;const l=0!==t.x&&0!==t.y;if(l){const e={x:o.position.x+t.x,y:o.position.y},n={x:o.position.x,y:o.position.y+t.y};if(!S(e)||!S(n))continue}let h=l?1.41421356:1;const u=M(T(o.position,e));if(u<=w)continue;h/=u;const p=o.gCost+h,d=a.get(n);if(d)p<d.gCost&&(d.gCost=p,d.fCost=p+d.hCost,d.parent=o,i.includes(d)||i.push(d));else{const t=O(e,r),s={position:{x:e.x,y:e.y},gCost:p,hCost:t,fCost:p+t,parent:o};i.push(s),a.set(n,s)}}}return b.SHOW_PATH_LOGS&&console.warn(`No path found after ${f} iterations`),null}let k=null,I="default";function L(t){k=t,I="Move"===t||"Mine"===t||"AddDropOff"===t?"move":"default"}class D{constructor(t,e,n,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};this.materials=t,this.durability=e,this.toBuild=n,this.toDestroy=o,this.retrievable=r,this.update=s,this.initThing=i}}class R{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type=t,this.integrity=1,this.thing=t.initThing(e),this.thing.addEventListener("click",(t=>{if(console.log("Structure clicked"),"Mine"===k){const t=C.getSelectedEntity();if(t instanceof $)return t.setTargetPosition(this.thing.position),L(null),void t.addEventListener("arrived",(()=>{t.setTask({type:"mine",target:this})}),{once:!0})}}))}draw(t,e,n){this.thing.draw(t,e,n),this.type.update(n,t,this),this.integrity<=0&&this.thing.remove()}}const C=new class{actions=[];visible=!0;selectedEntity=null;actionButtons=[];constructor(){this.position={x:0,y:0},this.size={x:300,y:100},this.updatePosition()}updatePosition(){const t=document.getElementById("canvas");t&&(this.position={x:20,y:t.height-this.size.y-20})}setSelectedEntity(t){this.selectedEntity=t,this.updateActions()}getSelectedEntity(){return this.selectedEntity}updateActions(){if(this.actions=[],this.clearActionButtons(),this.selectedEntity)if(this.selectedEntity instanceof H){let t=this.selectedEntity;this.actions.push({name:"Delete",description:"Delete this drop off location",execute:()=>{t.remove()},available:()=>!0})}else this.selectedEntity instanceof $?(this.actions.push({name:"Move",description:"Move this person to a new location",execute:()=>{L("Move"),console.log("Move action selected")},available:()=>!0}),this.actions.push({name:"Mine",description:"Assign this person to mine",execute:()=>{console.log("Mine action selected"),L("Mine")},available:()=>!0}),this.actions.push({name:"Build",description:"Build a structure",execute:()=>{console.log("Build action selected")},available:()=>!0})):this.selectedEntity instanceof R&&this.actions.push({name:"Repair",description:"Repair this structure",execute:()=>{console.log("Repair action selected")},available:()=>this.selectedEntity instanceof R&&this.selectedEntity.integrity<1});else this.actions.push({name:"+ dropoff",description:"Add drop off location",execute:()=>{console.log("Add drop off action selected"),L("AddDropOff")},available:()=>!0});this.createActionButtons()}createActionButtons(){this.actions.forEach(((t,e)=>{if(t.available()){const n=this.position.x+10+70*e,o=this.position.y+10,r=new y({shape:new c(60,60),position:{x:n+30,y:o+30},fillStyle:"rgba(50, 150, 200, 0.8)",strokeStyle:"white"});console.log("Creating button:",t.name),r.addEventListener("click",(e=>{console.log("click"),t.execute()})),this.actionButtons.push(r)}}))}clearActionButtons(){this.actionButtons.forEach((t=>t.remove())),this.actionButtons=[]}draw(t){if(!this.visible)return;t.fillStyle="rgba(30, 35, 50, 0.8)",t.fillRect(this.position.x,this.position.y,this.size.x,this.size.y),t.strokeStyle="rgba(100, 150, 200, 0.7)",t.lineWidth=2,t.strokeRect(this.position.x,this.position.y,this.size.x,this.size.y);this.actions.forEach(((e,n)=>{if(e.available()){const o=this.position.x+10+70*n,r=this.position.y+10;t.fillStyle="rgba(50, 100, 150, 0.8)",t.fillRect(o,r,60,60),t.strokeStyle="rgba(150, 200, 255, 0.9)",t.lineWidth=2,t.strokeRect(o,r,60,60),t.fillStyle="white",t.font="bold 16px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(e.name,o+30,r+30)}}))}};class H extends y{stock=[];constructor(t){super({shape:new a(10),position:t,fillStyle:"#FF0000",strokeStyle:"#000000",strokeWidth:1,isMapElement:!0}),this.location=t,this.addEventListener("click",(t=>{console.log("Dropoff location clicked"),C.setSelectedEntity(this)})),j.push(this)}dropMaterial(t){Array.isArray(t)?this.stock.push(...t):this.stock.push(t)}remove(){j.splice(j.indexOf(this),1),super.remove()}}const j=[];class N{}var B=function(t){return t[t.weapon=0]="weapon",t[t.armor=1]="armor",t[t.constructionTool=2]="constructionTool",t[t.miningTool=3]="miningTool",t[t.choppingTool=4]="choppingTool",t[t.fishingTool=5]="fishingTool",t[t.food=6]="food",t[t.drink=7]="drink",t[t.commodity=8]="commodity",t}(B||{});class z{constructor(t,e,n){this.type=t,this.effectiveness=e,this.durability=n}}class W{constructor(t,e,n){this.name=t,this.uses=e,this.weight=n}}class F{constructor(t,e){this.item=t,this.count=e}}class ${targetPosition=null;path=[];currentPathIndex=0;isMoving=!1;listeners={};retries=0;overshotFactor=0;constructor(t,e,n,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Map;this.physical=t,this.mental=e,this.position=n,this.YOB=o,this.money=r,this.possessions=i,this.skills=s}setTask(t){this.task=t}getTotalCurrentCarryingWeight(){return this.possessions.reduce(((t,e)=>t+e.count*e.item.weight),0)}setTargetPosition(t){const e=A(this.position,t);e&&0!==e.length?(this.targetPosition={...t},this.path=e,this.currentPathIndex=0,this.isMoving=!0):console.warn("No valid path found to target")}update(t,e){if(j.sort(((t,e)=>p(this.position,t.location)-p(this.position,e.location))),j.length>0&&0===p(this.position,j[0].location)){for(const t of this.possessions)j[0].dropMaterial(t);this.possessions=[],console.log("Dropped off.")}else if(this.getTotalCurrentCarryingWeight()>=.9*this.physical.strength&&j.length>0&&!1===this.isMoving){for(const t of j){const e=A(this.position,t.location);if(e&&e.length>0){this.setTargetPosition(t.location);break}}console.log("headed to drop off.",this.getTotalCurrentCarryingWeight(),.9*this.physical.strength)}if(!this.isMoving&&this.task){let e=this.task.target;if((!e||e.integrity<=0)&&(this.task=null),"mine"===this.task.type)if(p(this.position,e.thing.position)>=1)this.setTargetPosition(e.thing.position);else{e.integrity<=0&&(e.thing.remove(),this.task=null);const n=Math.min(1/(e.type.durability*t*this.physical.strength),e.integrity);e.integrity-=n;for(let t of e.type.materials)this.possessions.find((e=>e.item===t.item))||this.possessions.push(new F(t.item,0)),this.possessions.find((e=>e.item===t.item)).count+=t.count*n*e.type.retrievable;console.log(this.possessions,e.integrity),e.integrity<=0&&(e.thing.remove(),this.task=null)}}this.updateMovement(t,e)}updateMovement(t,e){if(!this.isMoving||!this.targetPosition||0===this.path.length)return!0;const n=this.path[this.currentPathIndex],o=n.x-this.position.x,r=n.y-this.position.y,i=p(this.position,n);if(i<1)return this.currentPathIndex++,this.currentPathIndex>=this.path.length&&(console.log("Reached final destination"),this.position={...this.targetPosition},this.isMoving=!1,this.retries=0,this.targetPosition=null,this.path=[],this.currentPathIndex=0,this.dispatchEvent({...e,type:"arrived",targetPosition:this.targetPosition}),!0);const s=this.physical.speed,a=this.overshotFactor,c=this.position;function l(e){const n=20*s*e*(t/1e3)+a*e,l=o/i,h=r/i;return{x:c.x+l*n,y:c.y+h*n}}let h=0,u=-1,d=l(1),f=1,y=0;for(;f>=w&&y<10;){h=T(this.position,d);let t=M(h);f=Math.abs(t-u),u=Math.max(t,w),d=l(u),y++}this.overshotFactor=0;const{x:v,y:g}=d;if(S({x:v,y:g})&&u>0){const t=this.position.x<n.x&&v>n.x||this.position.x>n.x&&v<n.x,e=this.position.y<n.y&&g>n.y||this.position.y>n.y&&g<n.y,o=t?Math.abs((v-n.x)/(n.x-this.position.x)):0,r=e?Math.abs((g-n.y)/(n.y-this.position.y)):0;this.overshotFactor=Math.max(o,r)/u,t||e?(this.position.x=n.x,this.position.y=n.y):(this.position.x=v,this.position.y=g)}else{if(!(this.retries<5))return console.log("Max retries reached, giving up"),this.isMoving=!1,this.targetPosition=null,this.path=[],this.currentPathIndex=0,this.retries=0,this.dispatchEvent({...e,type:"failed",targetPosition:this.targetPosition}),!0;{console.log("Path blocked by impassable terrain. Finding new path...");const t=this.path[this.currentPathIndex+1],e=A(this.position,t);if(e)this.path.splice(this.currentPathIndex+1,0,...e);else{const t=A(this.position,this.targetPosition);t&&(this.path=t,this.currentPathIndex=0)}this.retries++}}return!1}addEventListener(t,e,n){this.listeners[t]||(this.listeners[t]=[]),n&&n.once?this.listeners[t].push((n=>{e(n),this.removeEventListener(t,e)})):this.listeners[t].push(e)}removeEventListener(t,e,n){this.listeners[t]=this.listeners[t].filter((t=>t!==e))}dispatchEvent(t){return console.log("Dispatching event:",t),!!this.listeners[t.type]&&(this.listeners[t.type].forEach((e=>e(t))),!0)}}const U=new W("Wood",[new z(B.commodity,1,1)],20),G=new W("Stone",[new z(B.commodity,3,2)],80);function V(t,e){let n=0,o=0;for(;0===n;)n=Math.random();for(;0===o;)o=Math.random();return t+e*Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*o)}class q{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.people=[],this.color=e,this.name=t,this.isPlayerNation=n,this.possessions=[],this.money=0}addPerson(t){this.people.push(t)}removePerson(t){const e=this.people.indexOf(t);-1!==e&&this.people.splice(e,1)}createPerson(t){const e=V(82.6,34.4),n={height:V(1.77,.08),weight:e,strength:V(.3,.1)*e,speed:V(1.9,.3)},o=new N;o.problem_solving=V(5,2),o.knowledge=V(5,2),o.creativity=V(5,2);const r=15+Math.floor(60*Math.random()),i=new $(n,o,t,1e3-r);return this.addPerson(i),i}}const X=new class{nations=[];playerNation=null;constructor(){}addNation(t){this.nations.push(t),t.isPlayerNation&&(this.playerNation=t)}getNations(){return this.nations}getPlayerNation(){return this.playerNation}};class Y extends y{selected=!1;constructor(t,e){super({shape:new a(1),position:t.position,fillStyle:`rgba(${255*e.color[0]}, ${255*e.color[1]}, ${255*e.color[2]}, ${e.color[3]})`,strokeStyle:"white",strokeWidth:.5,isMapElement:!0}),this.person=t,this.nation=e,this.originalRadius=1,function(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/150,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,o=1,r=!1,i=null;const s=t.draw;t.draw=function(a,c,l){t.hovering&&!r?(i=performance.now(),r=!0):!t.hovering&&r&&(i=null,r=!1);let h=o;if(r&&null!==i){let t=c*e;o=Math.min(o+t,n)}else if(!r){let t=c*e;o=Math.max(o-t,1)}t.shape.scale(o/h),s.call(t,a,c)}}(this,1.3),this.addEventListener("click",(t=>{this.selected?this.deselect():this.select()}))}select(){J.deselectAll(),this.selected=!0,this.strokeStyle="yellow",this.strokeWidth=.25,C.setSelectedEntity(this.person),console.log(`Selected person from ${this.nation.name}`),console.log(`Person attributes: Strength: ${this.person.physical.strength.toFixed(1)}, Speed: ${this.person.physical.speed.toFixed(1)}`)}deselect(){this.selected=!1,this.strokeStyle="white",this.strokeWidth=.25,C.getSelectedEntity()===this.person&&C.setSelectedEntity(null)}draw(t,e,n){if(this.person.isMoving&&this.person.path.length>0){t.beginPath(),t.moveTo(this.position.x,this.position.y);const e=this.person.path[this.person.currentPathIndex];if(t.lineTo(e.x,e.y),this.person.currentPathIndex<this.person.path.length-1)for(let e=this.person.currentPathIndex+1;e<this.person.path.length;e++)t.lineTo(this.person.path[e].x,this.person.path[e].y);t.strokeStyle="rgba(255, 255, 0, 0.4)",t.lineWidth=.5,t.stroke()}if(super.draw(t,e,n),this.selected){const e=.2*Math.sin(Date.now()/200)+1.2,n=this.shape.radius*e;t.beginPath(),t.arc(this.position.x,this.position.y,n,0,2*Math.PI),t.strokeStyle="rgba(255, 255, 0, 0.5)",t.lineWidth=1,t.stroke()}}isSelected(){return this.selected}getPerson(){return this.person}updatePosition(){this.position=this.person.position}moveTo(t){this.person.setTargetPosition(t),console.log(`Person moving to (${t.x.toFixed(0)}, ${t.y.toFixed(0)})`)}update(t,e){this.person.update(t,e),this.position={...this.person.position}}}class J{static personVisuals=[];static addPersonVisual(t){this.personVisuals.push(t)}static removePersonVisual(t){const e=this.personVisuals.indexOf(t);-1!==e&&this.personVisuals.splice(e,1)}static getPersonVisuals(){return this.personVisuals}static deselectAll(){this.personVisuals.forEach((t=>{t.deselect()}))}static createPersonVisual(t,e){const n=new Y(t,e);return this.addPersonVisual(n),n}static updateAll(t,e){this.personVisuals.forEach((n=>{n.update(t,e)}))}}let Z,K;const Q=document.getElementById("canvas"),tt=Q.getContext("2d");let et=window.devicePixelRatio,nt=window.innerWidth*et,ot=window.innerHeight*et;const rt=[{threshold:x.WATER_THRESHOLD,color:[.5,.5,1/x.WATER_THRESHOLD]},{threshold:x.MOUNTAIN_THRESHOLD,color:[.8,1/x.MOUNTAIN_THRESHOLD,.55]}];let it={x:0,y:0,zoom:1,move_speed:1,zoom_speed:.001,realZoom:1},st=new Set,at=0,ct=0,lt=new c(1570,1e3);const ht=1*lt.width,ut=1*lt.height;let pt={width:1,height:1},dt=1,ft=200;const yt=["left","right","middle","back","forward"];let vt=!0,gt=0,mt="Generating world...";new D([new F(G,100)],200,B.miningTool,B.miningTool,.5,(t=>new y({isMapElement:!0,shape:new c(t.width,t.height),fillStyle:"#808080",...t}))),new D([new F(U,100)],100,B.choppingTool,B.choppingTool,.5,(t=>new y({isMapElement:!0,shape:new c(t.width,t.height),fillStyle:"#808080",...t})));const xt=new D([new F(U,100)],100,B.choppingTool,B.choppingTool,1,(t=>new y({isMapElement:!0,shape:new a(t.radius),fillStyle:"#654321",...t})));let wt={canvasPosition:{x:nt/2,y:nt/2},mapPosition:new i(0,0),canvasHeight:ot,canvasWidth:nt,mapHeight:ut,mapWidth:ht,canvas:Q,canvasRenderingContext2D:tt,elapsed:ct,type:"mouseover",mouseButtons:{left:!1,right:!1,middle:!1,back:!1,forward:!1}};wt.mapPosition=Pt(wt.canvasPosition);class bt{constructor(){this.pressed=!1,this.pressed_time=0,this.pressed_position={x:0,y:0},this.pressed_position_map={x:0,y:0}}}let Et={left:new bt,right:new bt,middle:new bt,back:new bt,forward:new bt};function Pt(t){let e=Math.min(pt.width,pt.height);return{x:it.x/e+t.x/(e*it.zoom),y:it.y/e+t.y/(e*it.zoom)}}function St(t){let e=function(t,e,n,o){const{min:r,max:i,data:s}=t,a=new Uint8ClampedArray(e*n*4);o.sort(((t,e)=>t.threshold-e.threshold));let c=0;for(let t=0;t<n;t++)for(let n=0;n<e;n++){const e=s[t][n],r=255*e;let i=r,l=r,h=r;for(const t of o)if(e<t.threshold){i=t.color[0]*r,l=t.color[1]*r,h=t.color[2]*r;break}a[c++]=i,a[c++]=l,a[c++]=h,a[c++]=255}return console.log("Map rendered!"),new ImageData(a,e,n)}(t,lt.width,lt.height,rt);createImageBitmap(e).then((t=>{K=t,vt=!1}))}function Tt(t,e){return Boolean(t&1<<yt.indexOf(e))}function Mt(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];wt.mapPosition=Pt(wt.canvasPosition),v.forEach((e=>{let n=e.hovering;if(e.isMapElement)e.hovering=u(wt.mapPosition,e);else{if(t)return;e.hovering=u(wt.canvasPosition,e)}!1===n&&!0===e.hovering?e.dispatchEvent(Ot("mouseover")):!0===n&&!1===e.hovering&&e.dispatchEvent(Ot("mouseout"))}))}function Ot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{...wt,type:t,...e}}function _t(t){t.preventDefault();let e=performance.now(),n=t.type,o=t.buttons,r={x:t.clientX*et,y:t.clientY*et};if(wt=Ot(n,{canvasPosition:r,mouseButtons:{left:Tt(o,"left"),right:Tt(o,"right"),middle:Tt(o,"middle"),back:Tt(o,"back"),forward:Tt(o,"forward")}}),"pointerdown"===n&&Tt(o,"right")){const e=C.getSelectedEntity();if(e instanceof $){const n=J.getPersonVisuals().find((t=>t.getPerson()===e));if(n)return n.moveTo(wt.mapPosition),void t.preventDefault()}}if("Move"===k&&"pointerdown"===n&&Tt(o,"left")){const t=C.getSelectedEntity();if(t instanceof $){const e=J.getPersonVisuals().find((e=>e.getPerson()===t));if(e)return e.moveTo(wt.mapPosition),void L(null)}}if("AddDropOff"===k&&"pointerdown"===n&&Tt(o,"left")){const t=new H(wt.mapPosition);v.push(t),L(null)}Mt();for(let n of yt){let i=Tt(o,n),s=Et[n];if(i&&!s.pressed)s.pressed=!0,s.pressed_time=e,s.pressed_position={...r},s.pressed_position_map={...wt.mapPosition},2===t.button&&t.preventDefault(),wt.type="pointerdown",wt.mouseButtons[n]=!0;else if(!i&&s.pressed){s.pressed=!1;let t=e-s.pressed_time,o=p(s.pressed_position,r),i=s.pressed_position,a=s.pressed_position_map,c=s.pressed_time;if(t<250&&o<8)for(let r of v){if(r.isMapElement&&u(a,r)){r.dispatchEvent(Ot("click",{click:{startPosition:i,startPositionOnMap:a,endPosition:wt.canvasPosition,endPositionOnMap:wt.mapPosition,startTime:c,endTime:e,duration:t,distanceMoved:o,button:n}}));break}if(!r.isMapElement&&u(i,r)){r.dispatchEvent(Ot("click",{click:{startPosition:i,startPositionOnMap:a,endPosition:wt.canvasPosition,endPositionOnMap:wt.mapPosition,startTime:c,endTime:e,duration:t,distanceMoved:o,button:n}}));break}}else for(let r of v)if(u(a,r)){r.dispatchEvent(Ot("drag",{click:{startPosition:i,startPositionOnMap:a,endPosition:wt.canvasPosition,endPositionOnMap:wt.mapPosition,startTime:c,endTime:e,duration:t,distanceMoved:o,button:n}}));break}}}}function At(t){var e;e=Math.min(Math.max(dt,it.zoom+t),ft),it.x=wt.canvasPosition.x/it.zoom-wt.canvasPosition.x/e+it.x,it.y=wt.canvasPosition.y/it.zoom-wt.canvasPosition.y/e+it.y,it.zoom=e}new i(0,0),window.addEventListener("pointermove",_t),window.addEventListener("pointerdown",_t),window.addEventListener("pointerup",_t),window.addEventListener("contextmenu",(t=>{t.preventDefault()}),!1),window.addEventListener("wheel",(t=>{let e=t.deltaX,n=t.deltaY,o=t.deltaZ;!0===t.ctrlKey?(t.preventDefault(),At(-n/50)):(it.x+=e/it.zoom,it.y+=n/it.zoom,At(o/50),Mt(!0))}),{passive:!1}),window.addEventListener("keydown",(t=>{st.add(t.key.toLowerCase())})),window.addEventListener("keyup",(t=>{st.delete(t.key.toLowerCase()),"t"==t.key?St(Z.heatMap):"h"==t.key?St(Z.heightMap):"i"==t.key?St(Z.materialMap.Iron):"g"==t.key&&St(Z.materialMap.Gold)}));let kt=t=>t.preventDefault(),It={passive:!1};function Lt(){et=window.devicePixelRatio,nt=window.innerWidth*et,ot=window.innerHeight*et,Q.width=nt,Q.height=ot,pt.width=nt/ht,pt.height=ot/ut,wt.canvasWidth=nt,wt.canvasHeight=ot,C.updatePosition(),C.updateActions()}document.addEventListener("wheel",kt,It),document.addEventListener("dblclick",kt,It),document.addEventListener("touchstart",kt,It),document.addEventListener("gesturestart",kt,It),document.addEventListener("gesturechange",kt,It),document.addEventListener("gestureend",kt,It),window.addEventListener("gamepadconnected",(t=>{console.log(`Gamepad connected at index ${t.gamepad.index}: ${t.gamepad.id}. \n    ${t.gamepad.buttons.length} buttons, ${t.gamepad.axes.length} axes.`)})),window.addEventListener("gamepaddisconnected",(t=>{console.log(`Gamepad disconnected from index ${t.gamepad.index}: ${t.gamepad.id}`)})),Lt(),async function(){vt=!0,gt=0,mt="Initializing...",console.log("Initializing game...");const t=new q("Player Nation",[0,.5,.8,1],!0);t.color=[0,.6,.9,1],X.addNation(t),console.log("Player nation created:",t),console.log("Creating 15 people...");for(let e=0;e<15;e++){let e=0,n=0;do{e=Math.random()*ht,n=Math.random()*ut}while(P({x:e,y:n})<=x.WATER_THRESHOLD||P({x:e,y:n})>=x.MOUNTAIN_THRESHOLD);const o=t.createPerson({x:e,y:n});J.createPersonVisual(o,t),console.log(`Created person at position (${e.toFixed(0)}, ${n.toFixed(0)})`)}console.log("Total people created:",J.getPersonVisuals().length),fetch("/generate-map",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({width:lt.width,height:lt.height})}).then((t=>t.json())).then((t=>{Z=t.map,E=Z,console.log("Terrain utils initialized with world map:",E?"success":"failed"),console.log("Terrain utilities initialized with map data"),St(Z.heightMap),console.log("Map loaded, game ready!");for(let t=0;t<200;t++){let t=0,e=0;do{t=Math.random()*ht,e=Math.random()*ut}while(P({x:t,y:e})<=x.WATER_THRESHOLD||P({x:t,y:e})>=x.MOUNTAIN_THRESHOLD);new R(xt,{position:{x:t,y:e},radius:3})}vt=!1}))}(),async function t(e){ct=e-at,at=e,function(t){if(wt.elapsed=t,vt)return void function(){tt.fillStyle="black",tt.fillRect(0,0,nt,ot),tt.font="bold 40px Sans-serif",tt.fillStyle="white",tt.textAlign="center",tt.textBaseline="middle",tt.fillText("Civilization Game",nt/2,ot/3),tt.font="30px Sans-serif",tt.fillText(mt,nt/2,ot/2);const t=.6*nt,e=nt/2-t/2,n=ot/2+50;tt.fillStyle="#333",tt.fillRect(e,n,t,20),tt.fillStyle="#4CAF50",tt.fillRect(e,n,t*(gt/100),20),tt.font="16px Sans-serif",tt.fillStyle="white",tt.fillText(`${gt}%`,nt/2,n+20+20)}();if(tt.clearRect(0,0,nt,ot),tt.fillStyle="lightblue",tt.fillRect(0,0,nt,ot),!K)return;!function(t){let e=!1;const n=navigator.getGamepads();for(const o of n)if(o){o.buttons[7]&&o.buttons[7].value>.1&&At(t*it.zoom_speed*it.zoom*o.buttons[7].value),o.buttons[6]&&o.buttons[6].value>.1&&At(-t*it.zoom_speed*it.zoom*o.buttons[6].value);const n=.1,r=3;let i=!1;(Math.abs(o.axes[0])>n||Math.abs(o.axes[1])>n)&&(wt.canvasPosition.x+=o.axes[0]*r*t,wt.canvasPosition.y+=o.axes[1]*r*t,wt.canvasPosition.x=Math.max(0,Math.min(nt,wt.canvasPosition.x)),wt.canvasPosition.y=Math.max(0,Math.min(ot,wt.canvasPosition.y)),Mt(),i=!0);const s=.1,a=3;Math.abs(o.axes[2])>s&&(it.x+=t*it.move_speed*o.axes[2]*a/it.zoom,e=!0),Math.abs(o.axes[3])>s&&(it.y+=t*it.move_speed*o.axes[3]*a/it.zoom,e=!0),o.buttons[0]&&o.buttons[0].pressed?wt.mouseButtons.left||(wt.mouseButtons.left=!0,Et.left.pressed=!0,Et.left.pressed_time=performance.now(),Et.left.pressed_position={...wt.canvasPosition},Et.left.pressed_position_map={...wt.mapPosition}):wt.mouseButtons.left&&(wt.mouseButtons.left=!1)}st.has("-")&&At(-t*it.zoom_speed*it.zoom),st.has("=")&&At(t*it.zoom_speed*it.zoom),st.has("arrowleft")&&(it.x-=t*it.move_speed/it.zoom,e=!0),st.has("arrowright")&&(it.x+=t*it.move_speed/it.zoom,e=!0),st.has("arrowup")&&(it.y-=t*it.move_speed/it.zoom,e=!0),st.has("arrowdown")&&(it.y+=t*it.move_speed/it.zoom,e=!0),e&&Mt(!0)}(t),J.updateAll(t,wt),tt.save();try{it.realZoom=it.zoom*Math.min(pt.width,pt.height),tt.translate(-it.x*it.zoom,-it.y*it.zoom),tt.scale(it.realZoom,it.realZoom),tt.imageSmoothingEnabled=!1,tt.drawImage(K,0,0,ht,ut);for(let e of v)e.display&&e.isMapElement&&e.draw(tt,t,wt);for(let e of o)e.draw(tt,t,wt)}finally{tt.restore()}!function(t){wt.elapsed=t;for(let e of v)e.display&&!e.isMapElement&&e.draw(tt,t,wt);m(tt,t,wt)}(t),C.draw(tt),function(t,e,n){let o=t.split("\n");for(let t=0;t<o.length;t++){let n=o[t];tt.font="30px Sans-serif",tt.strokeStyle="black",tt.lineWidth=5,tt.strokeText(n,e,80+35*t),tt.fillStyle="white",tt.fillText(n,e,80+35*t)}}(`X: ${wt.mapPosition.x.toFixed(0)}\nY: ${wt.mapPosition.y.toFixed(0)}\nZoom: ${it.zoom.toFixed(2)}`,nt-200);let e=300,n=e*lt.ratio,i=nt-(n+25),s=ot-325;tt.drawImage(K,i,s,n,e);let a=nt/ht*n/it.realZoom,c=ot/ut*e/it.realZoom,l=i+it.x/ht*n/Math.min(pt.width,pt.height),h=s+it.y/ut*e/Math.min(pt.width,pt.height);tt.strokeStyle="red",tt.lineWidth=.5,tt.strokeRect(l,h,a,c);let u=tt.createLinearGradient(l,h,l+a,h+c);u.addColorStop(0,"rgba(255, 100, 100, 0.33)"),u.addColorStop(.5,"rgba(255, 100, 100, 0.1)"),u.addColorStop(1,"rgba(255, 100, 100, 0.3)"),tt.fillStyle=u,tt.fillRect(l,h,a,c);for(let e of r)e.draw(tt,t,wt);if(m(tt,t,wt),"move"===I){const t=20,e=3;tt.strokeStyle="white",tt.lineWidth=e,tt.beginPath(),tt.moveTo(wt.canvasPosition.x-t,wt.canvasPosition.y),tt.lineTo(wt.canvasPosition.x+t,wt.canvasPosition.y),tt.stroke(),tt.beginPath(),tt.moveTo(wt.canvasPosition.x,wt.canvasPosition.y-t),tt.lineTo(wt.canvasPosition.x,wt.canvasPosition.y+t),tt.stroke(),tt.strokeStyle="black",tt.lineWidth=1,tt.beginPath(),tt.moveTo(wt.canvasPosition.x-t-1,wt.canvasPosition.y),tt.lineTo(wt.canvasPosition.x+t+1,wt.canvasPosition.y),tt.stroke(),tt.beginPath(),tt.moveTo(wt.canvasPosition.x,wt.canvasPosition.y-t-1),tt.lineTo(wt.canvasPosition.x,wt.canvasPosition.y+t+1),tt.stroke()}else{tt.fillStyle="lightblue",tt.strokeStyle="black",tt.lineWidth=5;let t=tt.lineWidth/2;tt.beginPath(),tt.moveTo(wt.canvasPosition.x+t,wt.canvasPosition.y+t),tt.lineTo(wt.canvasPosition.x+t,wt.canvasPosition.y+45-t),tt.lineTo(wt.canvasPosition.x+15-t,wt.canvasPosition.y+30-t),tt.lineTo(wt.canvasPosition.x+37.5-t,wt.canvasPosition.y+30-t),tt.closePath(),tt.fill(),tt.stroke()}}(ct),requestAnimationFrame(t)}(0),window.addEventListener("resize",Lt)},9306:(t,e,n)=>{var o=n(4901),r=n(6823),i=TypeError;t.exports=function(t){if(o(t))return t;throw new i(r(t)+" is not a function")}},3506:(t,e,n)=>{var o=n(3925),r=String,i=TypeError;t.exports=function(t){if(o(t))return t;throw new i("Can't set "+r(t)+" as a prototype")}},7080:(t,e,n)=>{var o=n(4402).has;t.exports=function(t){return o(t),t}},8551:(t,e,n)=>{var o=n(34),r=String,i=TypeError;t.exports=function(t){if(o(t))return t;throw new i(r(t)+" is not an object")}},7811:t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7394:(t,e,n)=>{var o=n(4576),r=n(6706),i=n(2195),s=o.ArrayBuffer,a=o.TypeError;t.exports=s&&r(s.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==i(t))throw new a("ArrayBuffer expected");return t.byteLength}},3238:(t,e,n)=>{var o=n(4576),r=n(7476),i=n(7394),s=o.ArrayBuffer,a=s&&s.prototype,c=a&&r(a.slice);t.exports=function(t){if(0!==i(t))return!1;if(!c)return!1;try{return c(t,0,0),!1}catch(t){return!0}}},5169:(t,e,n)=>{var o=n(3238),r=TypeError;t.exports=function(t){if(o(t))throw new r("ArrayBuffer is detached");return t}},5636:(t,e,n)=>{var o=n(4576),r=n(9504),i=n(6706),s=n(7696),a=n(5169),c=n(7394),l=n(4483),h=n(1548),u=o.structuredClone,p=o.ArrayBuffer,d=o.DataView,f=Math.min,y=p.prototype,v=d.prototype,g=r(y.slice),m=i(y,"resizable","get"),x=i(y,"maxByteLength","get"),w=r(v.getInt8),b=r(v.setInt8);t.exports=(h||l)&&function(t,e,n){var o,r=c(t),i=void 0===e?r:s(e),y=!m||!m(t);if(a(t),h&&(t=u(t,{transfer:[t]}),r===i&&(n||y)))return t;if(r>=i&&(!n||y))o=g(t,0,i);else{var v=n&&!y&&x?{maxByteLength:x(t)}:void 0;o=new p(i,v);for(var E=new d(t),P=new d(o),S=f(i,r),T=0;T<S;T++)b(P,T,w(E,T))}return h||l(t),o}},4644:(t,e,n)=>{var o,r,i,s=n(7811),a=n(3724),c=n(4576),l=n(4901),h=n(34),u=n(9297),p=n(6955),d=n(6823),f=n(6699),y=n(6840),v=n(2106),g=n(1625),m=n(2787),x=n(2967),w=n(8227),b=n(3392),E=n(1181),P=E.enforce,S=E.get,T=c.Int8Array,M=T&&T.prototype,O=c.Uint8ClampedArray,_=O&&O.prototype,A=T&&m(T),k=M&&m(M),I=Object.prototype,L=c.TypeError,D=w("toStringTag"),R=b("TYPED_ARRAY_TAG"),C="TypedArrayConstructor",H=s&&!!x&&"Opera"!==p(c.opera),j=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},z=function(t){var e=m(t);if(h(e)){var n=S(e);return n&&u(n,C)?n[C]:z(e)}},W=function(t){if(!h(t))return!1;var e=p(t);return u(N,e)||u(B,e)};for(o in N)(i=(r=c[o])&&r.prototype)?P(i)[C]=r:H=!1;for(o in B)(i=(r=c[o])&&r.prototype)&&(P(i)[C]=r);if((!H||!l(A)||A===Function.prototype)&&(A=function(){throw new L("Incorrect invocation")},H))for(o in N)c[o]&&x(c[o],A);if((!H||!k||k===I)&&(k=A.prototype,H))for(o in N)c[o]&&x(c[o].prototype,k);if(H&&m(_)!==k&&x(_,k),a&&!u(k,D))for(o in j=!0,v(k,D,{configurable:!0,get:function(){return h(this)?this[R]:void 0}}),N)c[o]&&f(c[o],R,o);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:H,TYPED_ARRAY_TAG:j&&R,aTypedArray:function(t){if(W(t))return t;throw new L("Target is not a typed array")},aTypedArrayConstructor:function(t){if(l(t)&&(!x||g(A,t)))return t;throw new L(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,o){if(a){if(n)for(var r in N){var i=c[r];if(i&&u(i.prototype,t))try{delete i.prototype[t]}catch(n){try{i.prototype[t]=e}catch(t){}}}k[t]&&!n||y(k,t,n?e:H&&M[t]||e,o)}},exportTypedArrayStaticMethod:function(t,e,n){var o,r;if(a){if(x){if(n)for(o in N)if((r=c[o])&&u(r,t))try{delete r[t]}catch(t){}if(A[t]&&!n)return;try{return y(A,t,n?e:H&&A[t]||e)}catch(t){}}for(o in N)!(r=c[o])||r[t]&&!n||y(r,t,e)}},getTypedArrayConstructor:z,isView:function(t){if(!h(t))return!1;var e=p(t);return"DataView"===e||u(N,e)||u(B,e)},isTypedArray:W,TypedArray:A,TypedArrayPrototype:k}},5370:(t,e,n)=>{var o=n(6198);t.exports=function(t,e,n){for(var r=0,i=arguments.length>2?n:o(e),s=new t(i);i>r;)s[r]=e[r++];return s}},9617:(t,e,n)=>{var o=n(5397),r=n(5610),i=n(6198),s=function(t){return function(e,n,s){var a=o(e),c=i(a);if(0===c)return!t&&-1;var l,h=r(s,c);if(t&&n!=n){for(;c>h;)if((l=a[h++])!=l)return!0}else for(;c>h;h++)if((t||h in a)&&a[h]===n)return t||h||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},4527:(t,e,n)=>{var o=n(3724),r=n(4376),i=TypeError,s=Object.getOwnPropertyDescriptor,a=o&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(r(t)&&!s(t,"length").writable)throw new i("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},7628:(t,e,n)=>{var o=n(6198);t.exports=function(t,e){for(var n=o(t),r=new e(n),i=0;i<n;i++)r[i]=t[n-i-1];return r}},9928:(t,e,n)=>{var o=n(6198),r=n(1291),i=RangeError;t.exports=function(t,e,n,s){var a=o(t),c=r(n),l=c<0?a+c:c;if(l>=a||l<0)throw new i("Incorrect index");for(var h=new e(a),u=0;u<a;u++)h[u]=u===l?s:t[u];return h}},2195:(t,e,n)=>{var o=n(9504),r=o({}.toString),i=o("".slice);t.exports=function(t){return i(r(t),8,-1)}},6955:(t,e,n)=>{var o=n(2140),r=n(4901),i=n(2195),s=n(8227)("toStringTag"),a=Object,c="Arguments"===i(function(){return arguments}());t.exports=o?i:function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?n:c?i(e):"Object"===(o=i(e))&&r(e.callee)?"Arguments":o}},7740:(t,e,n)=>{var o=n(9297),r=n(5031),i=n(7347),s=n(4913);t.exports=function(t,e,n){for(var a=r(e),c=s.f,l=i.f,h=0;h<a.length;h++){var u=a[h];o(t,u)||n&&o(n,u)||c(t,u,l(e,u))}}},2211:(t,e,n)=>{var o=n(9039);t.exports=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},6699:(t,e,n)=>{var o=n(3724),r=n(4913),i=n(6980);t.exports=o?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},6980:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2106:(t,e,n)=>{var o=n(283),r=n(4913);t.exports=function(t,e,n){return n.get&&o(n.get,e,{getter:!0}),n.set&&o(n.set,e,{setter:!0}),r.f(t,e,n)}},6840:(t,e,n)=>{var o=n(4901),r=n(4913),i=n(283),s=n(9433);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(o(n)&&i(n,l,a),a.global)c?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},9433:(t,e,n)=>{var o=n(4576),r=Object.defineProperty;t.exports=function(t,e){try{r(o,t,{value:e,configurable:!0,writable:!0})}catch(n){o[t]=e}return e}},3724:(t,e,n)=>{var o=n(9039);t.exports=!o((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4483:(t,e,n)=>{var o,r,i,s,a=n(4576),c=n(9429),l=n(1548),h=a.structuredClone,u=a.ArrayBuffer,p=a.MessageChannel,d=!1;if(l)d=function(t){h(t,{transfer:[t]})};else if(u)try{p||(o=c("worker_threads"))&&(p=o.MessageChannel),p&&(r=new p,i=new u(2),s=function(t){r.port1.postMessage(null,[t])},2===i.byteLength&&(s(i),0===i.byteLength&&(d=s)))}catch(t){}t.exports=d},4055:(t,e,n)=>{var o=n(4576),r=n(34),i=o.document,s=r(i)&&r(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},6837:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8727:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6193:(t,e,n)=>{var o=n(4215);t.exports="NODE"===o},2839:(t,e,n)=>{var o=n(4576).navigator,r=o&&o.userAgent;t.exports=r?String(r):""},9519:(t,e,n)=>{var o,r,i=n(4576),s=n(2839),a=i.process,c=i.Deno,l=a&&a.versions||c&&c.version,h=l&&l.v8;h&&(r=(o=h.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!r&&s&&(!(o=s.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=s.match(/Chrome\/(\d+)/))&&(r=+o[1]),t.exports=r},4215:(t,e,n)=>{var o=n(4576),r=n(2839),i=n(2195),s=function(t){return r.slice(0,t.length)===t};t.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":o.Bun&&"string"==typeof Bun.version?"BUN":o.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(o.process)?"NODE":o.window&&o.document?"BROWSER":"REST"},6518:(t,e,n)=>{var o=n(4576),r=n(7347).f,i=n(6699),s=n(6840),a=n(9433),c=n(7740),l=n(2796);t.exports=function(t,e){var n,h,u,p,d,f=t.target,y=t.global,v=t.stat;if(n=y?o:v?o[f]||a(f,{}):o[f]&&o[f].prototype)for(h in e){if(p=e[h],u=t.dontCallGetSet?(d=r(n,h))&&d.value:n[h],!l(y?h:f+(v?".":"#")+h,t.forced)&&void 0!==u){if(typeof p==typeof u)continue;c(p,u)}(t.sham||u&&u.sham)&&i(p,"sham",!0),s(n,h,p,t)}}},9039:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},616:(t,e,n)=>{var o=n(9039);t.exports=!o((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},9565:(t,e,n)=>{var o=n(616),r=Function.prototype.call;t.exports=o?r.bind(r):function(){return r.apply(r,arguments)}},350:(t,e,n)=>{var o=n(3724),r=n(9297),i=Function.prototype,s=o&&Object.getOwnPropertyDescriptor,a=r(i,"name"),c=a&&"something"===function(){}.name,l=a&&(!o||o&&s(i,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},6706:(t,e,n)=>{var o=n(9504),r=n(9306);t.exports=function(t,e,n){try{return o(r(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},7476:(t,e,n)=>{var o=n(2195),r=n(9504);t.exports=function(t){if("Function"===o(t))return r(t)}},9504:(t,e,n)=>{var o=n(616),r=Function.prototype,i=r.call,s=o&&r.bind.bind(i,i);t.exports=o?s:function(t){return function(){return i.apply(t,arguments)}}},9429:(t,e,n)=>{var o=n(4576),r=n(6193);t.exports=function(t){if(r){try{return o.process.getBuiltinModule(t)}catch(t){}try{return Function('return require("'+t+'")')()}catch(t){}}}},7751:(t,e,n)=>{var o=n(4576),r=n(4901);t.exports=function(t,e){return arguments.length<2?(n=o[t],r(n)?n:void 0):o[t]&&o[t][e];var n}},1767:t=>{t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},5966:(t,e,n)=>{var o=n(9306),r=n(4117);t.exports=function(t,e){var n=t[e];return r(n)?void 0:o(n)}},3789:(t,e,n)=>{var o=n(9306),r=n(8551),i=n(9565),s=n(1291),a=n(1767),c="Invalid size",l=RangeError,h=TypeError,u=Math.max,p=function(t,e){this.set=t,this.size=u(e,0),this.has=o(t.has),this.keys=o(t.keys)};p.prototype={getIterator:function(){return a(r(i(this.keys,this.set)))},includes:function(t){return i(this.has,this.set,t)}},t.exports=function(t){r(t);var e=+t.size;if(e!=e)throw new h(c);var n=s(e);if(n<0)throw new l(c);return new p(t,n)}},4576:function(t,e,n){var o=function(t){return t&&t.Math===Math&&t};t.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n.g&&n.g)||o("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:(t,e,n)=>{var o=n(9504),r=n(8981),i=o({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(r(t),e)}},421:t=>{t.exports={}},5917:(t,e,n)=>{var o=n(3724),r=n(9039),i=n(4055);t.exports=!o&&!r((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},7055:(t,e,n)=>{var o=n(9504),r=n(9039),i=n(2195),s=Object,a=o("".split);t.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===i(t)?a(t,""):s(t)}:s},3706:(t,e,n)=>{var o=n(9504),r=n(4901),i=n(7629),s=o(Function.toString);r(i.inspectSource)||(i.inspectSource=function(t){return s(t)}),t.exports=i.inspectSource},1181:(t,e,n)=>{var o,r,i,s=n(8622),a=n(4576),c=n(34),l=n(6699),h=n(9297),u=n(7629),p=n(6119),d=n(421),f="Object already initialized",y=a.TypeError,v=a.WeakMap;if(s||u.state){var g=u.state||(u.state=new v);g.get=g.get,g.has=g.has,g.set=g.set,o=function(t,e){if(g.has(t))throw new y(f);return e.facade=t,g.set(t,e),e},r=function(t){return g.get(t)||{}},i=function(t){return g.has(t)}}else{var m=p("state");d[m]=!0,o=function(t,e){if(h(t,m))throw new y(f);return e.facade=t,l(t,m,e),e},r=function(t){return h(t,m)?t[m]:{}},i=function(t){return h(t,m)}}t.exports={set:o,get:r,has:i,enforce:function(t){return i(t)?r(t):o(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=r(e)).type!==t)throw new y("Incompatible receiver, "+t+" required");return n}}}},4376:(t,e,n)=>{var o=n(2195);t.exports=Array.isArray||function(t){return"Array"===o(t)}},1108:(t,e,n)=>{var o=n(6955);t.exports=function(t){var e=o(t);return"BigInt64Array"===e||"BigUint64Array"===e}},4901:t=>{var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},2796:(t,e,n)=>{var o=n(9039),r=n(4901),i=/#|\.prototype\./,s=function(t,e){var n=c[a(t)];return n===h||n!==l&&(r(e)?o(e):!!e)},a=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",h=s.POLYFILL="P";t.exports=s},4117:t=>{t.exports=function(t){return null==t}},34:(t,e,n)=>{var o=n(4901);t.exports=function(t){return"object"==typeof t?null!==t:o(t)}},3925:(t,e,n)=>{var o=n(34);t.exports=function(t){return o(t)||null===t}},6395:t=>{t.exports=!1},757:(t,e,n)=>{var o=n(7751),r=n(4901),i=n(1625),s=n(7040),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return r(e)&&i(e.prototype,a(t))}},507:(t,e,n)=>{var o=n(9565);t.exports=function(t,e,n){for(var r,i,s=n?t:t.iterator,a=t.next;!(r=o(a,s)).done;)if(void 0!==(i=e(r.value)))return i}},9539:(t,e,n)=>{var o=n(9565),r=n(8551),i=n(5966);t.exports=function(t,e,n){var s,a;r(t);try{if(!(s=i(t,"return"))){if("throw"===e)throw n;return n}s=o(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw n;if(a)throw s;return r(s),n}},6198:(t,e,n)=>{var o=n(8014);t.exports=function(t){return o(t.length)}},283:(t,e,n)=>{var o=n(9504),r=n(9039),i=n(4901),s=n(9297),a=n(3724),c=n(350).CONFIGURABLE,l=n(3706),h=n(1181),u=h.enforce,p=h.get,d=String,f=Object.defineProperty,y=o("".slice),v=o("".replace),g=o([].join),m=a&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),x=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===y(d(e),0,7)&&(e="["+v(d(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||c&&t.name!==e)&&(a?f(t,"name",{value:e,configurable:!0}):t.name=e),m&&n&&s(n,"arity")&&t.length!==n.arity&&f(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var o=u(t);return s(o,"source")||(o.source=g(x,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return i(this)&&p(this).source||l(this)}),"toString")},741:t=>{var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var o=+t;return(o>0?n:e)(o)}},4913:(t,e,n)=>{var o=n(3724),r=n(5917),i=n(8686),s=n(8551),a=n(6969),c=TypeError,l=Object.defineProperty,h=Object.getOwnPropertyDescriptor,u="enumerable",p="configurable",d="writable";e.f=o?i?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&d in n&&!n[d]){var o=h(t,e);o&&o[d]&&(t[e]=n.value,n={configurable:p in n?n[p]:o[p],enumerable:u in n?n[u]:o[u],writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(s(t),e=a(e),s(n),r)try{return l(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},7347:(t,e,n)=>{var o=n(3724),r=n(9565),i=n(8773),s=n(6980),a=n(5397),c=n(6969),l=n(9297),h=n(5917),u=Object.getOwnPropertyDescriptor;e.f=o?u:function(t,e){if(t=a(t),e=c(e),h)try{return u(t,e)}catch(t){}if(l(t,e))return s(!r(i.f,t,e),t[e])}},8480:(t,e,n)=>{var o=n(1828),r=n(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},3717:(t,e)=>{e.f=Object.getOwnPropertySymbols},2787:(t,e,n)=>{var o=n(9297),r=n(4901),i=n(8981),s=n(6119),a=n(2211),c=s("IE_PROTO"),l=Object,h=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=i(t);if(o(e,c))return e[c];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof l?h:null}},1625:(t,e,n)=>{var o=n(9504);t.exports=o({}.isPrototypeOf)},1828:(t,e,n)=>{var o=n(9504),r=n(9297),i=n(5397),s=n(9617).indexOf,a=n(421),c=o([].push);t.exports=function(t,e){var n,o=i(t),l=0,h=[];for(n in o)!r(a,n)&&r(o,n)&&c(h,n);for(;e.length>l;)r(o,n=e[l++])&&(~s(h,n)||c(h,n));return h}},8773:(t,e)=>{var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,r=o&&!n.call({1:2},1);e.f=r?function(t){var e=o(this,t);return!!e&&e.enumerable}:n},2967:(t,e,n)=>{var o=n(6706),r=n(34),i=n(7750),s=n(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=o(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return i(n),s(o),r(n)?(e?t(n,o):n.__proto__=o,n):n}}():void 0)},4270:(t,e,n)=>{var o=n(9565),r=n(4901),i=n(34),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&r(n=t.toString)&&!i(a=o(n,t)))return a;if(r(n=t.valueOf)&&!i(a=o(n,t)))return a;if("string"!==e&&r(n=t.toString)&&!i(a=o(n,t)))return a;throw new s("Can't convert object to primitive value")}},5031:(t,e,n)=>{var o=n(7751),r=n(9504),i=n(8480),s=n(3717),a=n(8551),c=r([].concat);t.exports=o("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=s.f;return n?c(e,n(t)):e}},7750:(t,e,n)=>{var o=n(4117),r=TypeError;t.exports=function(t){if(o(t))throw new r("Can't call method on "+t);return t}},9286:(t,e,n)=>{var o=n(4402),r=n(8469),i=o.Set,s=o.add;t.exports=function(t){var e=new i;return r(t,(function(t){s(e,t)})),e}},3440:(t,e,n)=>{var o=n(7080),r=n(4402),i=n(9286),s=n(5170),a=n(3789),c=n(8469),l=n(507),h=r.has,u=r.remove;t.exports=function(t){var e=o(this),n=a(t),r=i(e);return s(e)<=n.size?c(e,(function(t){n.includes(t)&&u(r,t)})):l(n.getIterator(),(function(t){h(e,t)&&u(r,t)})),r}},4402:(t,e,n)=>{var o=n(9504),r=Set.prototype;t.exports={Set,add:o(r.add),has:o(r.has),remove:o(r.delete),proto:r}},8750:(t,e,n)=>{var o=n(7080),r=n(4402),i=n(5170),s=n(3789),a=n(8469),c=n(507),l=r.Set,h=r.add,u=r.has;t.exports=function(t){var e=o(this),n=s(t),r=new l;return i(e)>n.size?c(n.getIterator(),(function(t){u(e,t)&&h(r,t)})):a(e,(function(t){n.includes(t)&&h(r,t)})),r}},4449:(t,e,n)=>{var o=n(7080),r=n(4402).has,i=n(5170),s=n(3789),a=n(8469),c=n(507),l=n(9539);t.exports=function(t){var e=o(this),n=s(t);if(i(e)<=n.size)return!1!==a(e,(function(t){if(n.includes(t))return!1}),!0);var h=n.getIterator();return!1!==c(h,(function(t){if(r(e,t))return l(h,"normal",!1)}))}},3838:(t,e,n)=>{var o=n(7080),r=n(5170),i=n(8469),s=n(3789);t.exports=function(t){var e=o(this),n=s(t);return!(r(e)>n.size)&&!1!==i(e,(function(t){if(!n.includes(t))return!1}),!0)}},8527:(t,e,n)=>{var o=n(7080),r=n(4402).has,i=n(5170),s=n(3789),a=n(507),c=n(9539);t.exports=function(t){var e=o(this),n=s(t);if(i(e)<n.size)return!1;var l=n.getIterator();return!1!==a(l,(function(t){if(!r(e,t))return c(l,"normal",!1)}))}},8469:(t,e,n)=>{var o=n(9504),r=n(507),i=n(4402),s=i.Set,a=i.proto,c=o(a.forEach),l=o(a.keys),h=l(new s).next;t.exports=function(t,e,n){return n?r({iterator:l(t),next:h},e):c(t,e)}},4916:(t,e,n)=>{var o=n(7751),r=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};t.exports=function(t){var e=o("Set");try{(new e)[t](r(0));try{return(new e)[t](r(-1)),!1}catch(t){return!0}}catch(t){return!1}}},5170:(t,e,n)=>{var o=n(6706),r=n(4402);t.exports=o(r.proto,"size","get")||function(t){return t.size}},3650:(t,e,n)=>{var o=n(7080),r=n(4402),i=n(9286),s=n(3789),a=n(507),c=r.add,l=r.has,h=r.remove;t.exports=function(t){var e=o(this),n=s(t).getIterator(),r=i(e);return a(n,(function(t){l(e,t)?h(r,t):c(r,t)})),r}},4204:(t,e,n)=>{var o=n(7080),r=n(4402).add,i=n(9286),s=n(3789),a=n(507);t.exports=function(t){var e=o(this),n=s(t).getIterator(),c=i(e);return a(n,(function(t){r(c,t)})),c}},6119:(t,e,n)=>{var o=n(5745),r=n(3392),i=o("keys");t.exports=function(t){return i[t]||(i[t]=r(t))}},7629:(t,e,n)=>{var o=n(6395),r=n(4576),i=n(9433),s="__core-js_shared__",a=t.exports=r[s]||i(s,{});(a.versions||(a.versions=[])).push({version:"3.38.1",mode:o?"pure":"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:(t,e,n)=>{var o=n(7629);t.exports=function(t,e){return o[t]||(o[t]=e||{})}},1548:(t,e,n)=>{var o=n(4576),r=n(9039),i=n(9519),s=n(4215),a=o.structuredClone;t.exports=!!a&&!r((function(){if("DENO"===s&&i>92||"NODE"===s&&i>94||"BROWSER"===s&&i>97)return!1;var t=new ArrayBuffer(8),e=a(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength}))},4495:(t,e,n)=>{var o=n(9519),r=n(9039),i=n(4576).String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},5610:(t,e,n)=>{var o=n(1291),r=Math.max,i=Math.min;t.exports=function(t,e){var n=o(t);return n<0?r(n+e,0):i(n,e)}},5854:(t,e,n)=>{var o=n(2777),r=TypeError;t.exports=function(t){var e=o(t,"number");if("number"==typeof e)throw new r("Can't convert number to bigint");return BigInt(e)}},7696:(t,e,n)=>{var o=n(1291),r=n(8014),i=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=o(t),n=r(e);if(e!==n)throw new i("Wrong length or index");return n}},5397:(t,e,n)=>{var o=n(7055),r=n(7750);t.exports=function(t){return o(r(t))}},1291:(t,e,n)=>{var o=n(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:o(e)}},8014:(t,e,n)=>{var o=n(1291),r=Math.min;t.exports=function(t){var e=o(t);return e>0?r(e,9007199254740991):0}},8981:(t,e,n)=>{var o=n(7750),r=Object;t.exports=function(t){return r(o(t))}},2777:(t,e,n)=>{var o=n(9565),r=n(34),i=n(757),s=n(5966),a=n(4270),c=n(8227),l=TypeError,h=c("toPrimitive");t.exports=function(t,e){if(!r(t)||i(t))return t;var n,c=s(t,h);if(c){if(void 0===e&&(e="default"),n=o(c,t,e),!r(n)||i(n))return n;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},6969:(t,e,n)=>{var o=n(2777),r=n(757);t.exports=function(t){var e=o(t,"string");return r(e)?e:e+""}},2140:(t,e,n)=>{var o={};o[n(8227)("toStringTag")]="z",t.exports="[object z]"===String(o)},6823:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},3392:(t,e,n)=>{var o=n(9504),r=0,i=Math.random(),s=o(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+i,36)}},7040:(t,e,n)=>{var o=n(4495);t.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:(t,e,n)=>{var o=n(3724),r=n(9039);t.exports=o&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8622:(t,e,n)=>{var o=n(4576),r=n(4901),i=o.WeakMap;t.exports=r(i)&&/native code/.test(String(i))},8227:(t,e,n)=>{var o=n(4576),r=n(5745),i=n(9297),s=n(3392),a=n(4495),c=n(7040),l=o.Symbol,h=r("wks"),u=c?l.for||l:l&&l.withoutSetter||s;t.exports=function(t){return i(h,t)||(h[t]=a&&i(l,t)?l[t]:u("Symbol."+t)),h[t]}},6573:(t,e,n)=>{var o=n(3724),r=n(2106),i=n(3238),s=ArrayBuffer.prototype;o&&!("detached"in s)&&r(s,"detached",{configurable:!0,get:function(){return i(this)}})},7936:(t,e,n)=>{var o=n(6518),r=n(5636);r&&o({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return r(this,arguments.length?arguments[0]:void 0,!1)}})},8100:(t,e,n)=>{var o=n(6518),r=n(5636);r&&o({target:"ArrayBuffer",proto:!0},{transfer:function(){return r(this,arguments.length?arguments[0]:void 0,!0)}})},4114:(t,e,n)=>{var o=n(6518),r=n(8981),i=n(6198),s=n(4527),a=n(6837);o({target:"Array",proto:!0,arity:1,forced:n(9039)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=r(this),n=i(e),o=arguments.length;a(n+o);for(var c=0;c<o;c++)e[n]=arguments[c],n++;return s(e,n),n}})},7642:(t,e,n)=>{var o=n(6518),r=n(3440);o({target:"Set",proto:!0,real:!0,forced:!n(4916)("difference")},{difference:r})},8004:(t,e,n)=>{var o=n(6518),r=n(9039),i=n(8750);o({target:"Set",proto:!0,real:!0,forced:!n(4916)("intersection")||r((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}))},{intersection:i})},3853:(t,e,n)=>{var o=n(6518),r=n(4449);o({target:"Set",proto:!0,real:!0,forced:!n(4916)("isDisjointFrom")},{isDisjointFrom:r})},5876:(t,e,n)=>{var o=n(6518),r=n(3838);o({target:"Set",proto:!0,real:!0,forced:!n(4916)("isSubsetOf")},{isSubsetOf:r})},2475:(t,e,n)=>{var o=n(6518),r=n(8527);o({target:"Set",proto:!0,real:!0,forced:!n(4916)("isSupersetOf")},{isSupersetOf:r})},5024:(t,e,n)=>{var o=n(6518),r=n(3650);o({target:"Set",proto:!0,real:!0,forced:!n(4916)("symmetricDifference")},{symmetricDifference:r})},1698:(t,e,n)=>{var o=n(6518),r=n(4204);o({target:"Set",proto:!0,real:!0,forced:!n(4916)("union")},{union:r})},7467:(t,e,n)=>{var o=n(7628),r=n(4644),i=r.aTypedArray,s=r.exportTypedArrayMethod,a=r.getTypedArrayConstructor;s("toReversed",(function(){return o(i(this),a(this))}))},4732:(t,e,n)=>{var o=n(4644),r=n(9504),i=n(9306),s=n(5370),a=o.aTypedArray,c=o.getTypedArrayConstructor,l=o.exportTypedArrayMethod,h=r(o.TypedArrayPrototype.sort);l("toSorted",(function(t){void 0!==t&&i(t);var e=a(this),n=s(c(e),e);return h(n,t)}))},9577:(t,e,n)=>{var o=n(9928),r=n(4644),i=n(1108),s=n(1291),a=n(5854),c=r.aTypedArray,l=r.getTypedArrayConstructor,h=r.exportTypedArrayMethod,u=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();h("with",{with:function(t,e){var n=c(this),r=s(t),h=i(n)?a(e):+e;return o(n,l(n),r,h)}}.with,!u)},3375:(t,e,n)=>{n(7642)},9225:(t,e,n)=>{n(8004)},3972:(t,e,n)=>{n(3853)},9209:(t,e,n)=>{n(5876)},5714:(t,e,n)=>{n(2475)},7561:(t,e,n)=>{n(5024)},6197:(t,e,n)=>{n(1698)}},o={};function r(t){var e=o[t];if(void 0!==e){if(void 0!==e.error)throw e.error;return e.exports}var i=o[t]={exports:{}};try{var s={id:t,module:i,factory:n[t],require:r};r.i.forEach((function(t){t(s)})),i=s.module,s.factory.call(i.exports,i,i.exports,s.require)}catch(t){throw i.error=t,t}return i.exports}r.m=n,r.c=o,r.i=[],r.hu=t=>t+"."+r.h()+".hot-update.js",r.hmrF=()=>"main."+r.h()+".hot-update.json",r.h=()=>"4c4a29fc2216d7cec1d1",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="civ:",r.l=(n,o,i,s)=>{if(t[n])t[n].push(o);else{var a,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),h=0;h<l.length;h++){var u=l[h];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==e+i){a=u;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",e+i),a.src=n),t[n]=[o];var p=(e,o)=>{a.onerror=a.onload=null,clearTimeout(d);var r=t[n];if(delete t[n],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((t=>t(o))),e)return e(o)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),c&&document.head.appendChild(a)}},(()=>{var t,e,n,o={},i=r.c,s=[],a=[],c="idle",l=0,h=[];function u(t){c=t;for(var e=[],n=0;n<a.length;n++)e[n]=a[n].call(null,t);return Promise.all(e).then((function(){}))}function p(){0==--l&&u("ready").then((function(){if(0===l){var t=h;h=[];for(var e=0;e<t.length;e++)t[e]()}}))}function d(t){if("idle"!==c)throw new Error("check() is only allowed in idle status");return u("check").then(r.hmrM).then((function(n){return n?u("prepare").then((function(){var o=[];return e=[],Promise.all(Object.keys(r.hmrC).reduce((function(t,i){return r.hmrC[i](n.c,n.r,n.m,t,e,o),t}),[])).then((function(){return e=function(){return t?y(t):u("ready").then((function(){return o}))},0===l?e():new Promise((function(t){h.push((function(){t(e())}))}));var e}))})):u(v()?"ready":"idle").then((function(){return null}))}))}function f(t){return"ready"!==c?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+c+")")})):y(t)}function y(t){t=t||{},v();var o=e.map((function(e){return e(t)}));e=void 0;var r=o.map((function(t){return t.error})).filter(Boolean);if(r.length>0)return u("abort").then((function(){throw r[0]}));var i=u("dispose");o.forEach((function(t){t.dispose&&t.dispose()}));var s,a=u("apply"),c=function(t){s||(s=t)},l=[];return o.forEach((function(t){if(t.apply){var e=t.apply(c);if(e)for(var n=0;n<e.length;n++)l.push(e[n])}})),Promise.all([i,a]).then((function(){return s?u("fail").then((function(){throw s})):n?y(t).then((function(t){return l.forEach((function(e){t.indexOf(e)<0&&t.push(e)})),t})):u("idle").then((function(){return l}))}))}function v(){if(n)return e||(e=[]),Object.keys(r.hmrI).forEach((function(t){n.forEach((function(n){r.hmrI[t](n,e)}))})),n=void 0,!0}r.hmrD=o,r.i.push((function(h){var y,v,g,m,x=h.module,w=function(e,n){var o=i[n];if(!o)return e;var r=function(r){if(o.hot.active){if(i[r]){var a=i[r].parents;-1===a.indexOf(n)&&a.push(n)}else s=[n],t=r;-1===o.children.indexOf(r)&&o.children.push(r)}else console.warn("[HMR] unexpected require("+r+") from disposed module "+n),s=[];return e(r)},a=function(t){return{configurable:!0,enumerable:!0,get:function(){return e[t]},set:function(n){e[t]=n}}};for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&"e"!==h&&Object.defineProperty(r,h,a(h));return r.e=function(t,n){return function(t){switch(c){case"ready":u("prepare");case"prepare":return l++,t.then(p,p),t;default:return t}}(e.e(t,n))},r}(h.require,h.id);x.hot=(y=h.id,v=x,m={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:g=t!==y,_requireSelf:function(){s=v.parents.slice(),t=g?void 0:y,r(y)},active:!0,accept:function(t,e,n){if(void 0===t)m._selfAccepted=!0;else if("function"==typeof t)m._selfAccepted=t;else if("object"==typeof t&&null!==t)for(var o=0;o<t.length;o++)m._acceptedDependencies[t[o]]=e||function(){},m._acceptedErrorHandlers[t[o]]=n;else m._acceptedDependencies[t]=e||function(){},m._acceptedErrorHandlers[t]=n},decline:function(t){if(void 0===t)m._selfDeclined=!0;else if("object"==typeof t&&null!==t)for(var e=0;e<t.length;e++)m._declinedDependencies[t[e]]=!0;else m._declinedDependencies[t]=!0},dispose:function(t){m._disposeHandlers.push(t)},addDisposeHandler:function(t){m._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=m._disposeHandlers.indexOf(t);e>=0&&m._disposeHandlers.splice(e,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":e=[],Object.keys(r.hmrI).forEach((function(t){r.hmrI[t](y,e)})),u("ready");break;case"ready":Object.keys(r.hmrI).forEach((function(t){r.hmrI[t](y,e)}));break;case"prepare":case"check":case"dispose":case"apply":(n=n||[]).push(y)}},check:d,apply:f,status:function(t){if(!t)return c;a.push(t)},addStatusHandler:function(t){a.push(t)},removeStatusHandler:function(t){var e=a.indexOf(t);e>=0&&a.splice(e,1)},data:o[y]},t=void 0,m),x.parents=s,x.children=[],s=[],h.require=w})),r.hmrC={},r.hmrI={}})(),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t,e,n,o,i,s=r.hmrS_jsonp=r.hmrS_jsonp||{792:0},a={};function c(e,n){return t=n,new Promise(((t,n)=>{a[e]=t;var o=r.p+r.hu(e),i=new Error;r.l(o,(t=>{if(a[e]){a[e]=void 0;var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;i.message="Loading hot update chunk "+e+" failed.\n("+o+": "+r+")",i.name="ChunkLoadError",i.type=o,i.request=r,n(i)}}))}))}function l(t){function a(t){for(var e=[t],n={},o=e.map((function(t){return{chain:[t],id:t}}));o.length>0;){var i=o.pop(),s=i.id,a=i.chain,l=r.c[s];if(l&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:s};if(l.hot._main)return{type:"unaccepted",chain:a,moduleId:s};for(var h=0;h<l.parents.length;h++){var u=l.parents[h],p=r.c[u];if(p){if(p.hot._declinedDependencies[s])return{type:"declined",chain:a.concat([u]),moduleId:s,parentId:u};-1===e.indexOf(u)&&(p.hot._acceptedDependencies[s]?(n[u]||(n[u]=[]),c(n[u],[s])):(delete n[u],e.push(u),o.push({chain:a.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:n}}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];-1===t.indexOf(o)&&t.push(o)}}r.f&&delete r.f.jsonpHmr,e=void 0;var l={},h=[],u={},p=function(t){console.warn("[HMR] unexpected require("+t.id+") to disposed module")};for(var d in n)if(r.o(n,d)){var f=n[d],y=f?a(d):{type:"disposed",moduleId:d},v=!1,g=!1,m=!1,x="";switch(y.chain&&(x="\nUpdate propagation: "+y.chain.join(" -> ")),y.type){case"self-declined":t.onDeclined&&t.onDeclined(y),t.ignoreDeclined||(v=new Error("Aborted because of self decline: "+y.moduleId+x));break;case"declined":t.onDeclined&&t.onDeclined(y),t.ignoreDeclined||(v=new Error("Aborted because of declined dependency: "+y.moduleId+" in "+y.parentId+x));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(y),t.ignoreUnaccepted||(v=new Error("Aborted because "+d+" is not accepted"+x));break;case"accepted":t.onAccepted&&t.onAccepted(y),g=!0;break;case"disposed":t.onDisposed&&t.onDisposed(y),m=!0;break;default:throw new Error("Unexception type "+y.type)}if(v)return{error:v};if(g)for(d in u[d]=f,c(h,y.outdatedModules),y.outdatedDependencies)r.o(y.outdatedDependencies,d)&&(l[d]||(l[d]=[]),c(l[d],y.outdatedDependencies[d]));m&&(c(h,[y.moduleId]),u[d]=p)}n=void 0;for(var w,b=[],E=0;E<h.length;E++){var P=h[E],S=r.c[P];S&&(S.hot._selfAccepted||S.hot._main)&&u[P]!==p&&!S.hot._selfInvalidated&&b.push({module:P,require:S.hot._requireSelf,errorHandler:S.hot._selfAccepted})}return{dispose:function(){var t;o.forEach((function(t){delete s[t]})),o=void 0;for(var e,n=h.slice();n.length>0;){var i=n.pop(),a=r.c[i];if(a){var c={},u=a.hot._disposeHandlers;for(E=0;E<u.length;E++)u[E].call(null,c);for(r.hmrD[i]=c,a.hot.active=!1,delete r.c[i],delete l[i],E=0;E<a.children.length;E++){var p=r.c[a.children[E]];p&&(t=p.parents.indexOf(i))>=0&&p.parents.splice(t,1)}}}for(var d in l)if(r.o(l,d)&&(a=r.c[d]))for(w=l[d],E=0;E<w.length;E++)e=w[E],(t=a.children.indexOf(e))>=0&&a.children.splice(t,1)},apply:function(e){for(var n in u)r.o(u,n)&&(r.m[n]=u[n]);for(var o=0;o<i.length;o++)i[o](r);for(var s in l)if(r.o(l,s)){var a=r.c[s];if(a){w=l[s];for(var c=[],p=[],d=[],f=0;f<w.length;f++){var y=w[f],v=a.hot._acceptedDependencies[y],g=a.hot._acceptedErrorHandlers[y];if(v){if(-1!==c.indexOf(v))continue;c.push(v),p.push(g),d.push(y)}}for(var m=0;m<c.length;m++)try{c[m].call(null,w)}catch(n){if("function"==typeof p[m])try{p[m](n,{moduleId:s,dependencyId:d[m]})}catch(o){t.onErrored&&t.onErrored({type:"accept-error-handler-errored",moduleId:s,dependencyId:d[m],error:o,originalError:n}),t.ignoreErrored||(e(o),e(n))}else t.onErrored&&t.onErrored({type:"accept-errored",moduleId:s,dependencyId:d[m],error:n}),t.ignoreErrored||e(n)}}}for(var x=0;x<b.length;x++){var E=b[x],P=E.module;try{E.require(P)}catch(n){if("function"==typeof E.errorHandler)try{E.errorHandler(n,{moduleId:P,module:r.c[P]})}catch(o){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:P,error:o,originalError:n}),t.ignoreErrored||(e(o),e(n))}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:P,error:n}),t.ignoreErrored||e(n)}}return h}}}self.webpackHotUpdateciv=(e,o,s)=>{for(var c in o)r.o(o,c)&&(n[c]=o[c],t&&t.push(c));s&&i.push(s),a[e]&&(a[e](),a[e]=void 0)},r.hmrI.jsonp=function(t,e){n||(n={},i=[],o=[],e.push(l)),r.o(n,t)||(n[t]=r.m[t])},r.hmrC.jsonp=function(t,a,h,u,p,d){p.push(l),e={},o=a,n=h.reduce((function(t,e){return t[e]=!1,t}),{}),i=[],t.forEach((function(t){r.o(s,t)&&void 0!==s[t]?(u.push(c(t,d)),e[t]=!0):e[t]=!1})),r.f&&(r.f.jsonpHmr=function(t,n){e&&r.o(e,t)&&!e[t]&&(n.push(c(t)),e[t]=!0)})},r.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(r.p+r.hmrF()).then((t=>{if(404!==t.status){if(!t.ok)throw new Error("Failed to fetch update manifest "+t.statusText);return t.json()}}))}})(),r(5222)})();