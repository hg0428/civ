(()=>{"use strict";var t,e,n={6895:(t,e,n)=>{n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197);const r=[],o=[];class i{constructor(t,e){this.x=t,this.y=e}}class s{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.radiusX=t,this.radiusY=e,this.rotation=n}scale(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.radiusX*=t,this.radiusY*=e}}class a extends s{constructor(t){super(t,t),this.radius=t}setRadius(t){super.scale(t/this.radius),this.radius=t}}class c{ratio=1;constructor(t,e){this.width=t,this.height=e,this.ratio=t/e}scale(t){this.width*=t,this.height*=t}}class l{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;this.lineOneLength=t,this.lineTwoLength=e,this.lineWidth=n}scale(t){this.lineOneLength*=t,this.lineTwoLength*=t,this.lineWidth*=t}}class u{fill=!0;stroke=!0;fillRule="nonzero";display=!0;lineCap="butt";lineJoin="miter";miterLimit=10;constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.position=t.position??new i(0,0),this.shape=t.shape??new a(10),this.fillStyle=t.fillStyle,this.strokeStyle=t.strokeStyle,this.strokeWidth=t.strokeWidth,this.fill=t.fill??!0,this.stroke=t.stroke??!0,this.fillRule=t.fillRule??"nonzero",this.display=t.display??!0,this.lineCap=t.lineCap??"butt",this.lineJoin=t.lineJoin??"miter",this.miterLimit=t.miterLimit??10}draw(t,e,n){this.display&&function(t,e){if(t.display){if(e.beginPath(),t.fillStyle&&(e.fillStyle=t.fillStyle),t.strokeStyle&&(e.strokeStyle=t.strokeStyle),t.strokeWidth&&(e.lineWidth=t.strokeWidth),t.lineCap&&(e.lineCap=t.lineCap),t.lineJoin&&(e.lineJoin=t.lineJoin),t.miterLimit&&(e.miterLimit=t.miterLimit),t.shape instanceof s)e.ellipse(t.position.x,t.position.y,t.shape.radiusX,t.shape.radiusY,t.shape.rotation,0,2*Math.PI);else if(t.shape instanceof c)e.rect(t.position.x-t.shape.width/2,t.position.y-t.shape.height/2,t.shape.width,t.shape.height);else if(t.shape instanceof l){e.lineJoin="round";let n=Math.sqrt(2),r=t.shape.lineOneLength/n,o=t.shape.lineTwoLength/n;e.moveTo(t.position.x-r/2,t.position.y-r/2),e.lineTo(t.position.x+r/2,t.position.y+r/2),e.moveTo(t.position.x-o/2,t.position.y+o/2),e.lineTo(t.position.x+o/2,t.position.y-o/2)}else console.log("Unknown shape:",t.shape);t.fill&&(e.closePath(),e.fill(t.fillRule)),t.stroke&&e.stroke()}}(this,t)}remove(){r.filter((t=>t!==this)),o.filter((t=>t!==this))}}function h(t,e){if(e.shape instanceof a)return(t.x-e.position.x)**2+(t.y-e.position.y)**2<e.shape.radius**2;if(e.shape instanceof s){const n=new i((t.x-e.position.x)*Math.cos(-e.shape.rotation)-(t.y-e.position.y)*Math.sin(-e.shape.rotation),(t.x-e.position.x)*Math.sin(-e.shape.rotation)+(t.y-e.position.y)*Math.cos(-e.shape.rotation));return(n.x/e.shape.radiusX)**2+(n.y/e.shape.radiusY)**2<=1}if(e.shape instanceof c)return t.x>=e.position.x-e.shape.width/2&&t.x<=e.position.x+e.shape.width/2&&t.y>=e.position.y-e.shape.height/2&&t.y<=e.position.y+e.shape.height/2;if(e.shape instanceof l){let n=Math.max(e.shape.lineOneLength,e.shape.lineTwoLength)/2;return(t.x-e.position.x)**2+(t.y-e.position.y)**2<n**2}}n(4114),n(6573),n(8100),n(7936),n(7467),n(4732),n(9577);let p=[];class d{constructor(t,e,n,r){this.name=t,this.render_color=e,this.chemical_formula=n,this.relative_abundance=r/5,p.push(this)}}new d("Gold","#FFD700","Au",1),new d("Iron","#D4D7D8","Fe",4),new d("Copper","#B76B1E","Cu",3),new d("Silver","#C0C0C0","Ag",2),new d("Diamond","#FFF","C",1);class f extends u{hovering=!1;listeners={};isMapElement=!1;constructor(t){super(t),this.isMapElement=t.isMapElement??!1,y.push(this)}addEventListener(t,e,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}removeEventListener(t,e,n){this.listeners[t].filter((t=>t!==e))}dispatchEvent(t){return!!this.listeners[t.type]&&(this.listeners[t.type].forEach((e=>e(t))),!0)}remove(){super.remove(),y.splice(y.indexOf(this),1)}}const y=[],v=[];function g(t,e,n){for(let r of v)r.draw(t,e,n)}const m={WATER_THRESHOLD:.35,MOUNTAIN_THRESHOLD:.75,UPHILL_MAX_SLOPE:.7,UPHILL_MIN_SPEED:.05,DOWNHILL_BOOST_LIMIT:.2,DOWNHILL_MAX_SLOPE:.58,DOWNHILL_MAX_BOOST:3,DOWNHILL_MIN_SPEED:.15,PIXELS_TO_METERS:15,HEIGHT_RANGE:1500},x=.01,w={SHOW_PATH_LOGS:!0,SHOW_TERRAIN_LOGS:!1,DRAW_TERRAIN_GRID:!1};let b=null;function E(t){if(!b?.heightMap?.data)return w.SHOW_TERRAIN_LOGS&&console.warn("World map or height map data not initialized for terrain utilities"),.5;const e=b.heightMap.data,n=e.length,r=e[0]?.length;if(!r||0===n)return.5;const o=Math.round(t.x),i=Math.round(t.y),s=Math.max(0,Math.min(o,r-1)),a=Math.max(0,Math.min(i,n-1)),c=e[a]?.[s];return c??.5}function P(t){return b?.heightMap?.data?!(E(t)<m.WATER_THRESHOLD):(w.SHOW_TERRAIN_LOGS&&console.warn("World map or height map data not initialized for terrain utilities"),!0)}function S(t,e){const n=E(t),r=E(e),o=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))*m.PIXELS_TO_METERS;if(0===o)return 0;const i=(r-n)*m.HEIGHT_RANGE/o;return w.SHOW_TERRAIN_LOGS&&Math.abs(i)>.2&&console.log(`Slope from (${t.x.toFixed(1)}, ${t.y.toFixed(1)}) to (${e.x.toFixed(1)}, ${e.y.toFixed(1)}): ${i.toFixed(2)}`),i}function M(t){const{UPHILL_MAX_SLOPE:e,UPHILL_MIN_SPEED:n,DOWNHILL_BOOST_LIMIT:r,DOWNHILL_MAX_SLOPE:o,DOWNHILL_MAX_BOOST:i,DOWNHILL_MIN_SPEED:s}=m;if(t>0)return t>=e?0:1-t/e*(1-n);{const e=Math.abs(t);return e<r?1+e/r*(i-1):e<o?i-(e-r)/(o-r)*(i-s):0}}function O(t,e){const n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return Math.max(n,r)+(Math.SQRT2-1)*Math.min(n,r)}function T(t,e){return t.x===e.x&&t.y===e.y}class _{}var A=function(t){return t[t.weapon=0]="weapon",t[t.armor=1]="armor",t[t.constructionTool=2]="constructionTool",t[t.miningTool=3]="miningTool",t[t.choppingTool=4]="choppingTool",t[t.fishingTool=5]="fishingTool",t[t.food=6]="food",t[t.drink=7]="drink",t[t.commodity=8]="commodity",t}(A||{});class I{constructor(t,e,n){this.type=t,this.effectiveness=e,this.durability=n}}class L{constructor(t,e){this.name=t,this.uses=e}}class k{constructor(t,e){this.item=t,this.count=e}}class D{targetPosition=null;path=[];currentPathIndex=0;isMoving=!1;listeners={};retries=0;overshotFactor=0;constructor(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Map;this.physical=t,this.mental=e,this.position=n,this.YOB=r,this.money=o,this.possessions=i,this.skills=s}setTargetPosition(t){console.log("Setting target position:",t);const e=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e5;w.SHOW_PATH_LOGS&&console.log(`Finding path from (${t.x.toFixed(1)}, ${t.y.toFixed(1)}) to (${e.x.toFixed(1)}, ${e.y.toFixed(1)})`),Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));const r={x:Math.round(t.x),y:Math.round(t.y)},o={x:Math.round(e.x),y:Math.round(e.y)};if(T(r,o))return[{x:r.x,y:r.y}];if(!P(r)||!P(o))return w.SHOW_PATH_LOGS&&console.warn(`Start grid pos (${r.x}, ${r.y}) or end grid pos (${o.x}, ${o.y}) is impassable (water).`),null;const i=[],s=new Set,a=new Map,c=t=>`${t.x},${t.y}`,l=[{x:0,y:1},{x:1,y:0},{x:0,y:-1},{x:-1,y:0},{x:1,y:1},{x:1,y:-1},{x:-1,y:-1},{x:-1,y:1}],u={x:o.x-r.x,y:o.y-r.y},h=Math.sqrt(u.x*u.x+u.y*u.y);h>0&&(u.x/=h,u.y/=h,l.sort(((t,e)=>{const n=t.x*u.x+t.y*u.y;return e.x*u.x+e.y*u.y-n})));const p=O(r,o),d={position:{x:r.x,y:r.y},gCost:0,hCost:p,fCost:p,parent:null};i.push(d),a.set(c(r),d);let f=0;const y=8*n;for(;i.length>0&&f<y;){f++;let n=0;for(let t=1;t<i.length;t++)i[t].fCost<i[n].fCost&&(n=t);const r=i[n];i.splice(n,1);const u=c(r.position);if(s.add(u),T(r.position,o)){w.SHOW_PATH_LOGS&&console.log(`Path found after ${f} iterations`);const n=[];let o=r;for(;null!==o;)n.push({x:o.position.x,y:o.position.y}),o=o.parent;return n.reverse(),n.length>0&&(n[0]={x:t.x,y:t.y},n[n.length-1]={x:e.x,y:e.y}),n}for(const t of l){const e={x:r.position.x+t.x,y:r.position.y+t.y},n=c(e);if(s.has(n))continue;if(!P(e))continue;const l=0!==t.x&&0!==t.y;if(l){const e={x:r.position.x+t.x,y:r.position.y},n={x:r.position.x,y:r.position.y+t.y};if(!P(e)||!P(n))continue}let u=l?1.41421356:1;const h=M(S(r.position,e));if(h<=x)continue;u/=h;const p=r.gCost+u,d=a.get(n);if(d)p<d.gCost&&(d.gCost=p,d.fCost=p+d.hCost,d.parent=r,i.includes(d)||i.push(d));else{const t=O(e,o),s={position:{x:e.x,y:e.y},gCost:p,hCost:t,fCost:p+t,parent:r};i.push(s),a.set(n,s)}}}return w.SHOW_PATH_LOGS&&console.warn(`No path found after ${f} iterations`),null}(this.position,t);e&&0!==e.length?(this.targetPosition={...t},this.path=e,this.currentPathIndex=0,this.isMoving=!0,console.log(`Path found with ${e.length} waypoints:`,e)):console.warn("No valid path found to target")}updateMovement(t,e){if(!this.isMoving||!this.targetPosition||0===this.path.length)return!0;const n=this.path[this.currentPathIndex],r=n.x-this.position.x,o=n.y-this.position.y,i=Math.sqrt(r*r+o*o);if(i<1)return this.currentPathIndex++,console.log(`Reached waypoint ${this.currentPathIndex} of ${this.path.length}`),this.currentPathIndex>=this.path.length&&(console.log("Reached final destination"),this.position={...this.targetPosition},this.isMoving=!1,this.retries=0,this.targetPosition=null,this.path=[],this.currentPathIndex=0,this.dispatchEvent({...e,type:"arrived",targetPosition:this.targetPosition}),!0);const s=this.physical.speed,a=this.overshotFactor,c=this.position;function l(e){const n=20*s*(t/1e3)*e+a,l=r/i,u=o/i;return{x:c.x+l*n,y:c.y+u*n}}let u,h,p=l(1),d=1;for(;d>=x;){u=S(this.position,p);let t=M(u);d=Math.abs(t-h),h=Math.max(t,x),p=l(h)}this.overshotFactor=0;const{x:f,y}=p,v=this.position.x<n.x&&f>n.x||this.position.x>n.x&&f<n.x,g=this.position.y<n.y&&y>n.y||this.position.y>n.y&&y<n.y,m=v?Math.abs((f-n.x)/(n.x-this.position.x)):0,w=g?Math.abs((y-n.y)/(n.y-this.position.y)):0;return this.overshotFactor=Math.max(m,w),v||g?(this.position.x=n.x,this.position.y=n.y):(this.position.x=f,this.position.y=y),!1}addEventListener(t,e,n){this.listeners[t]||(this.listeners[t]=[]),n&&n.once?this.listeners[t].push((n=>{e(n),this.removeEventListener(t,e)})):this.listeners[t].push(e)}removeEventListener(t,e,n){this.listeners[t]=this.listeners[t].filter((t=>t!==e))}dispatchEvent(t){return console.log("Dispatching event:",t),!!this.listeners[t.type]&&(this.listeners[t.type].forEach((e=>e(t))),!0)}}const R=new L("Wood",[new I(A.commodity,1,1)]),H=new L("Stone",[new I(A.commodity,3,2)]);function C(t,e){let n=0,r=0;for(;0===n;)n=Math.random();for(;0===r;)r=Math.random();return t+e*Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*r)}class j{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.people=[],this.color=e,this.name=t,this.isPlayerNation=n,this.possessions=[],this.money=0}addPerson(t){this.people.push(t)}removePerson(t){const e=this.people.indexOf(t);-1!==e&&this.people.splice(e,1)}createPerson(t){const e={height:C(177,8),weight:C(82.6,34.4),strength:C(5,2),speed:C(5,2)},n=new _;n.problem_solving=C(5,2),n.knowledge=C(5,2),n.creativity=C(5,2);const r=15+Math.floor(60*Math.random()),o=new D(e,n,t,1e3-r);return this.addPerson(o),o}}const N=new class{nations=[];playerNation=null;constructor(){}addNation(t){this.nations.push(t),t.isPlayerNation&&(this.playerNation=t)}getNations(){return this.nations}getPlayerNation(){return this.playerNation}};let B=null,z="default";function W(t){B=t,z="Move"===t||"Mine"===t?"move":"default"}class F{constructor(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};this.materials=t,this.durability=e,this.toBuild=n,this.toDestroy=r,this.retrievable=o,this.update=s,this.initThing=i}}class ${constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type=t,this.integrity=1,this.thing=t.initThing(e),this.thing.addEventListener("click",(t=>{if(console.log("Structure clicked"),"Mine"===B){const t=G.getSelectedEntity();if(t instanceof D)return t.setTargetPosition(this.thing.position),W(null),void t.addEventListener("arrived",(()=>{console.log("Arrived! Event handler!");const e=setInterval((()=>{this.integrity<=0&&(this.thing.remove(),clearInterval(e));const n=Math.min(.1,this.integrity);this.integrity-=n;for(let e of this.type.materials)t.possessions.find((t=>t.item===e.item))||t.possessions.push(new k(e.item,0)),t.possessions.find((t=>t.item===e.item)).count+=e.count*n*this.type.retrievable,console.log(t.possessions);this.integrity<=0&&(this.thing.remove(),clearInterval(e))}),1e3)}),{once:!0})}}))}draw(t,e,n){this.thing.draw(t,e,n),this.type.update(n,t,this),this.integrity<=0&&this.thing.remove()}}new F([new k(H,100)],200,A.miningTool,A.miningTool,.5,(t=>new f({isMapElement:!0,shape:new c(t.width,t.height),fillStyle:"#808080",...t}))),new F([new k(R,100)],100,A.choppingTool,A.choppingTool,.5,(t=>new f({isMapElement:!0,shape:new c(t.width,t.height),fillStyle:"#808080",...t})));const U=new F([new k(R,100)],100,A.choppingTool,A.choppingTool,1,(t=>new f({isMapElement:!0,shape:new a(t.radius),fillStyle:"#654321",...t}))),G=new class{actions=[];visible=!1;selectedEntity=null;actionButtons=[];constructor(){this.position={x:0,y:0},this.size={x:300,y:100},this.updatePosition()}updatePosition(){const t=document.getElementById("canvas");t&&(this.position={x:20,y:t.height-this.size.y-20})}setSelectedEntity(t){this.selectedEntity=t,this.updateActions(),this.visible=null!==t}getSelectedEntity(){return this.selectedEntity}updateActions(){this.actions=[],this.clearActionButtons(),this.selectedEntity&&(this.selectedEntity instanceof D?(this.selectedEntity,this.actions.push({name:"Move",description:"Move this person to a new location",execute:()=>{W("Move"),console.log("Move action selected")},available:()=>!0}),this.actions.push({name:"Mine",description:"Assign this person to mine",execute:()=>{console.log("Mine action selected"),W("Mine")},available:()=>!0}),this.actions.push({name:"Build",description:"Build a structure",execute:()=>{console.log("Build action selected")},available:()=>!0})):this.selectedEntity instanceof $&&this.actions.push({name:"Repair",description:"Repair this structure",execute:()=>{console.log("Repair action selected")},available:()=>this.selectedEntity instanceof $&&this.selectedEntity.integrity<1}),this.createActionButtons())}createActionButtons(){this.actions.forEach(((t,e)=>{if(t.available()){const n=this.position.x+10+70*e,r=this.position.y+10,o=new f({shape:new c(60,60),position:{x:n+30,y:r+30},fillStyle:"rgba(50, 150, 200, 0.8)",strokeStyle:"white"});o.addEventListener("click",(e=>{t.execute()})),this.actionButtons.push(o)}}))}clearActionButtons(){this.actionButtons.forEach((t=>t.remove())),this.actionButtons=[]}draw(t){if(!this.visible)return;t.fillStyle="rgba(30, 35, 50, 0.8)",t.fillRect(this.position.x,this.position.y,this.size.x,this.size.y),t.strokeStyle="rgba(100, 150, 200, 0.7)",t.lineWidth=2,t.strokeRect(this.position.x,this.position.y,this.size.x,this.size.y);this.actions.forEach(((e,n)=>{if(e.available()){const r=this.position.x+10+70*n,o=this.position.y+10;t.fillStyle="rgba(50, 100, 150, 0.8)",t.fillRect(r,o,60,60),t.strokeStyle="rgba(150, 200, 255, 0.9)",t.lineWidth=2,t.strokeRect(r,o,60,60),t.fillStyle="white",t.font="bold 16px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(e.name,r+30,o+30)}}))}};class V extends f{selected=!1;constructor(t,e){super({shape:new a(1),position:t.position,fillStyle:`rgba(${255*e.color[0]}, ${255*e.color[1]}, ${255*e.color[2]}, ${e.color[3]})`,strokeStyle:"white",strokeWidth:.5,isMapElement:!0}),this.person=t,this.nation=e,this.originalRadius=1,function(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/150,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,r=1,o=!1,i=null;const s=t.draw;t.draw=function(a,c,l){t.hovering&&!o?(i=performance.now(),o=!0):!t.hovering&&o&&(i=null,o=!1);let u=r;if(o&&null!==i){let t=c*e;r=Math.min(r+t,n)}else if(!o){let t=c*e;r=Math.max(r-t,1)}t.shape.scale(r/u),s.call(t,a,c)}}(this,1.3),this.addEventListener("click",(t=>{this.select()}))}select(){q.deselectAll(),this.selected=!0,this.strokeStyle="yellow",this.strokeWidth=.25,G.setSelectedEntity(this.person),console.log(`Selected person from ${this.nation.name}`),console.log(`Person attributes: Strength: ${this.person.physical.strength.toFixed(1)}, Speed: ${this.person.physical.speed.toFixed(1)}`)}deselect(){this.selected=!1,this.strokeStyle="white",this.strokeWidth=.25,G.getSelectedEntity()===this.person&&G.setSelectedEntity(null)}draw(t,e,n){if(this.person.isMoving&&this.person.path.length>0){t.beginPath(),t.moveTo(this.position.x,this.position.y);const e=this.person.path[this.person.currentPathIndex];if(t.lineTo(e.x,e.y),this.person.currentPathIndex<this.person.path.length-1)for(let e=this.person.currentPathIndex+1;e<this.person.path.length;e++)t.lineTo(this.person.path[e].x,this.person.path[e].y);t.strokeStyle="rgba(255, 255, 0, 0.4)",t.lineWidth=.5,t.stroke()}if(super.draw(t,e,n),this.selected){const e=.2*Math.sin(Date.now()/200)+1.2,n=this.shape.radius*e;t.beginPath(),t.arc(this.position.x,this.position.y,n,0,2*Math.PI),t.strokeStyle="rgba(255, 255, 0, 0.5)",t.lineWidth=1,t.stroke()}}isSelected(){return this.selected}getPerson(){return this.person}updatePosition(){this.position=this.person.position}moveTo(t){this.person.setTargetPosition(t),console.log(`Person moving to (${t.x.toFixed(0)}, ${t.y.toFixed(0)})`)}update(t,e){this.person.updateMovement(t,e),this.position={...this.person.position}}}class q{static personVisuals=[];static addPersonVisual(t){this.personVisuals.push(t)}static removePersonVisual(t){const e=this.personVisuals.indexOf(t);-1!==e&&this.personVisuals.splice(e,1)}static getPersonVisuals(){return this.personVisuals}static deselectAll(){this.personVisuals.forEach((t=>{t.deselect()}))}static createPersonVisual(t,e){const n=new V(t,e);return this.addPersonVisual(n),n}static updateAll(t,e){this.personVisuals.forEach((n=>{n.update(t,e)}))}}let X,Y;const J=document.getElementById("canvas"),Z=J.getContext("2d");let K=window.devicePixelRatio,Q=window.innerWidth*K,tt=window.innerHeight*K;const et=[{threshold:m.WATER_THRESHOLD,color:[.5,.5,1/m.WATER_THRESHOLD]},{threshold:m.MOUNTAIN_THRESHOLD,color:[.8,1/m.MOUNTAIN_THRESHOLD,.55]}];let nt={x:0,y:0,zoom:1,move_speed:1,zoom_speed:.001,realZoom:1},rt=new Set,ot=0,it=0,st=new c(1570,1e3);const at=1*st.width,ct=1*st.height;let lt={width:1,height:1},ut=1,ht=200;const pt=["left","right","middle","back","forward"];let dt=!0,ft=0,yt="Generating world...",vt={canvasPosition:{x:Q/2,y:Q/2},mapPosition:new i(0,0),canvasHeight:tt,canvasWidth:Q,mapHeight:ct,mapWidth:at,canvas:J,canvasRenderingContext2D:Z,elapsed:it,type:"mouseover",mouseButtons:{left:!1,right:!1,middle:!1,back:!1,forward:!1}};vt.mapPosition=xt(vt.canvasPosition);class gt{constructor(){this.pressed=!1,this.pressed_time=0,this.pressed_position={x:0,y:0},this.pressed_position_map={x:0,y:0}}}let mt={left:new gt,right:new gt,middle:new gt,back:new gt,forward:new gt};function xt(t){let e=Math.min(lt.width,lt.height);return{x:nt.x/e+t.x/(e*nt.zoom),y:nt.y/e+t.y/(e*nt.zoom)}}function wt(t){let e=function(t,e,n,r){const{min:o,max:i,data:s}=t,a=new Uint8ClampedArray(e*n*4);r.sort(((t,e)=>t.threshold-e.threshold));let c=0;for(let t=0;t<n;t++)for(let n=0;n<e;n++){const e=s[t][n],o=255*e;let i=o,l=o,u=o;for(const t of r)if(e<t.threshold){i=t.color[0]*o,l=t.color[1]*o,u=t.color[2]*o;break}a[c++]=i,a[c++]=l,a[c++]=u,a[c++]=255}return console.log("Map rendered!"),new ImageData(a,e,n)}(t,st.width,st.height,et);createImageBitmap(e).then((t=>{Y=t,dt=!1}))}function bt(t,e){return Boolean(t&1<<pt.indexOf(e))}function Et(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];vt.mapPosition=xt(vt.canvasPosition),y.forEach((e=>{let n=e.hovering;if(e.isMapElement)e.hovering=h(vt.mapPosition,e);else{if(t)return;e.hovering=h(vt.canvasPosition,e)}!1===n&&!0===e.hovering?e.dispatchEvent(Pt("mouseover")):!0===n&&!1===e.hovering&&e.dispatchEvent(Pt("mouseout"))}))}function Pt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{...vt,type:t,...e}}function St(t){t.preventDefault();let e=performance.now(),n=t.type,r=t.buttons,o={x:t.clientX*K,y:t.clientY*K};if(vt=Pt(n,{canvasPosition:o,mouseButtons:{left:bt(r,"left"),right:bt(r,"right"),middle:bt(r,"middle"),back:bt(r,"back"),forward:bt(r,"forward")}}),"pointerdown"===n&&bt(r,"right")){const e=G.getSelectedEntity();if(e instanceof D){const n=q.getPersonVisuals().find((t=>t.getPerson()===e));if(n)return n.moveTo(vt.mapPosition),void t.preventDefault()}}if("Move"===B&&"pointerdown"===n&&bt(r,"left")){const t=G.getSelectedEntity();if(t instanceof D){const e=q.getPersonVisuals().find((e=>e.getPerson()===t));if(e)return e.moveTo(vt.mapPosition),void W(null)}}Et();for(let n of pt){let a=bt(r,n),c=mt[n];if(a&&!c.pressed)c.pressed=!0,c.pressed_time=e,c.pressed_position={...o},c.pressed_position_map={...vt.mapPosition},2===t.button&&t.preventDefault(),vt.type="pointerdown",vt.mouseButtons[n]=!0;else if(!a&&c.pressed){c.pressed=!1;let t=e-c.pressed_time,r=(i=c.pressed_position,s=o,Math.sqrt((i.x-s.x)**2+(i.y-s.y)**2)),a=c.pressed_position,l=c.pressed_position_map,u=c.pressed_time;if(t<250&&r<8)for(let o of y){if(o.isMapElement&&h(l,o)){o.dispatchEvent(Pt("click",{click:{startPosition:a,startPositionOnMap:l,endPosition:vt.canvasPosition,endPositionOnMap:vt.mapPosition,startTime:u,endTime:e,duration:t,distanceMoved:r,button:n}}));break}if(!o.isMapElement&&h(a,o)){o.dispatchEvent(Pt("click",{click:{startPosition:a,startPositionOnMap:l,endPosition:vt.canvasPosition,endPositionOnMap:vt.mapPosition,startTime:u,endTime:e,duration:t,distanceMoved:r,button:n}}));break}}else for(let o of y)if(h(l,o)){o.dispatchEvent(Pt("drag",{click:{startPosition:a,startPositionOnMap:l,endPosition:vt.canvasPosition,endPositionOnMap:vt.mapPosition,startTime:u,endTime:e,duration:t,distanceMoved:r,button:n}}));break}}}var i,s}function Mt(t){var e;e=Math.min(Math.max(ut,nt.zoom+t),ht),nt.x=vt.canvasPosition.x/nt.zoom-vt.canvasPosition.x/e+nt.x,nt.y=vt.canvasPosition.y/nt.zoom-vt.canvasPosition.y/e+nt.y,nt.zoom=e}new i(0,0),window.addEventListener("pointermove",St),window.addEventListener("pointerdown",St),window.addEventListener("pointerup",St),window.addEventListener("contextmenu",(t=>{t.preventDefault()}),!1),window.addEventListener("wheel",(t=>{let e=t.deltaX,n=t.deltaY,r=t.deltaZ;!0===t.ctrlKey?(t.preventDefault(),Mt(-n/50)):(nt.x+=e/nt.zoom,nt.y+=n/nt.zoom,Mt(r/50),Et(!0))}),{passive:!1}),window.addEventListener("keydown",(t=>{rt.add(t.key.toLowerCase())})),window.addEventListener("keyup",(t=>{rt.delete(t.key.toLowerCase()),"t"==t.key?wt(X.heatMap):"h"==t.key?wt(X.heightMap):"i"==t.key?wt(X.materialMap.Iron):"g"==t.key&&wt(X.materialMap.Gold)}));let Ot=t=>t.preventDefault(),Tt={passive:!1};function _t(){K=window.devicePixelRatio,Q=window.innerWidth*K,tt=window.innerHeight*K,J.width=Q,J.height=tt,lt.width=Q/at,lt.height=tt/ct,vt.canvasWidth=Q,vt.canvasHeight=tt,G.updatePosition()}document.addEventListener("wheel",Ot,Tt),document.addEventListener("dblclick",Ot,Tt),document.addEventListener("touchstart",Ot,Tt),document.addEventListener("gesturestart",Ot,Tt),document.addEventListener("gesturechange",Ot,Tt),document.addEventListener("gestureend",Ot,Tt),window.addEventListener("gamepadconnected",(t=>{console.log(`Gamepad connected at index ${t.gamepad.index}: ${t.gamepad.id}. \n    ${t.gamepad.buttons.length} buttons, ${t.gamepad.axes.length} axes.`)})),window.addEventListener("gamepaddisconnected",(t=>{console.log(`Gamepad disconnected from index ${t.gamepad.index}: ${t.gamepad.id}`)})),_t(),async function(){dt=!0,ft=0,yt="Initializing...",console.log("Initializing game...");const t=new j("Player Nation",[0,.5,.8,1],!0);t.color=[0,.6,.9,1],N.addNation(t),console.log("Player nation created:",t),console.log("Creating 15 people...");for(let e=0;e<15;e++){let e=0,n=0;do{e=Math.random()*at,n=Math.random()*ct}while(E({x:e,y:n})<=m.WATER_THRESHOLD||E({x:e,y:n})>=m.MOUNTAIN_THRESHOLD);const r={x:e,y:n},o=t.createPerson(r);q.createPersonVisual(o,t),console.log(`Created person at position (${e.toFixed(0)}, ${n.toFixed(0)})`)}console.log("Total people created:",q.getPersonVisuals().length),fetch("/generate-map",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({width:st.width,height:st.height})}).then((t=>t.json())).then((t=>{X=t.map,b=X,console.log("Terrain utils initialized with world map:",b?"success":"failed"),console.log("Terrain utilities initialized with map data"),wt(X.heightMap),console.log("Map loaded, game ready!");for(let t=0;t<200;t++){let t=0,e=0;do{t=Math.random()*at,e=Math.random()*ct}while(E({x:t,y:e})<=m.WATER_THRESHOLD||E({x:t,y:e})>=m.MOUNTAIN_THRESHOLD);new $(U,{position:{x:t,y:e},radius:3})}dt=!1}))}(),async function t(e){it=e-ot,ot=e,function(t){if(vt.elapsed=t,dt)return void function(){Z.fillStyle="black",Z.fillRect(0,0,Q,tt),Z.font="bold 40px Sans-serif",Z.fillStyle="white",Z.textAlign="center",Z.textBaseline="middle",Z.fillText("Civilization Game",Q/2,tt/3),Z.font="30px Sans-serif",Z.fillText(yt,Q/2,tt/2);const t=.6*Q,e=Q/2-t/2,n=tt/2+50;Z.fillStyle="#333",Z.fillRect(e,n,t,20),Z.fillStyle="#4CAF50",Z.fillRect(e,n,t*(ft/100),20),Z.font="16px Sans-serif",Z.fillStyle="white",Z.fillText(`${ft}%`,Q/2,n+20+20)}();if(Z.clearRect(0,0,Q,tt),Z.fillStyle="lightblue",Z.fillRect(0,0,Q,tt),!Y)return;!function(t){let e=!1;const n=navigator.getGamepads();for(const r of n)if(r){r.buttons[7]&&r.buttons[7].value>.1&&Mt(t*nt.zoom_speed*nt.zoom*r.buttons[7].value),r.buttons[6]&&r.buttons[6].value>.1&&Mt(-t*nt.zoom_speed*nt.zoom*r.buttons[6].value);const n=.1,o=3;let i=!1;(Math.abs(r.axes[0])>n||Math.abs(r.axes[1])>n)&&(vt.canvasPosition.x+=r.axes[0]*o*t,vt.canvasPosition.y+=r.axes[1]*o*t,vt.canvasPosition.x=Math.max(0,Math.min(Q,vt.canvasPosition.x)),vt.canvasPosition.y=Math.max(0,Math.min(tt,vt.canvasPosition.y)),Et(),i=!0);const s=.1,a=3;Math.abs(r.axes[2])>s&&(nt.x+=t*nt.move_speed*r.axes[2]*a/nt.zoom,e=!0),Math.abs(r.axes[3])>s&&(nt.y+=t*nt.move_speed*r.axes[3]*a/nt.zoom,e=!0),r.buttons[0]&&r.buttons[0].pressed?vt.mouseButtons.left||(vt.mouseButtons.left=!0,mt.left.pressed=!0,mt.left.pressed_time=performance.now(),mt.left.pressed_position={...vt.canvasPosition},mt.left.pressed_position_map={...vt.mapPosition}):vt.mouseButtons.left&&(vt.mouseButtons.left=!1)}rt.has("-")&&Mt(-t*nt.zoom_speed*nt.zoom),rt.has("=")&&Mt(t*nt.zoom_speed*nt.zoom),rt.has("arrowleft")&&(nt.x-=t*nt.move_speed/nt.zoom,e=!0),rt.has("arrowright")&&(nt.x+=t*nt.move_speed/nt.zoom,e=!0),rt.has("arrowup")&&(nt.y-=t*nt.move_speed/nt.zoom,e=!0),rt.has("arrowdown")&&(nt.y+=t*nt.move_speed/nt.zoom,e=!0),e&&Et(!0)}(t),q.updateAll(t,vt),Z.save();try{nt.realZoom=nt.zoom*Math.min(lt.width,lt.height),Z.translate(-nt.x*nt.zoom,-nt.y*nt.zoom),Z.scale(nt.realZoom,nt.realZoom),Z.imageSmoothingEnabled=!1,Z.drawImage(Y,0,0,at,ct);for(let e of y)e.display&&e.isMapElement&&e.draw(Z,t,vt);for(let e of r)e.draw(Z,t,vt)}finally{Z.restore()}!function(t){vt.elapsed=t;for(let e of y)e.display&&!e.isMapElement&&e.draw(Z,t,vt);g(Z,t,vt)}(t),G.draw(Z),function(t,e,n){let r=t.split("\n");for(let t=0;t<r.length;t++){let n=r[t];Z.font="30px Sans-serif",Z.strokeStyle="black",Z.lineWidth=5,Z.strokeText(n,e,80+35*t),Z.fillStyle="white",Z.fillText(n,e,80+35*t)}}(`X: ${vt.mapPosition.x.toFixed(0)}\nY: ${vt.mapPosition.y.toFixed(0)}\nZoom: ${nt.zoom.toFixed(2)}`,Q-200);let e=300,n=e*st.ratio,i=Q-(n+25),s=tt-325;Z.drawImage(Y,i,s,n,e);let a=Q/at*n/nt.realZoom,c=tt/ct*e/nt.realZoom,l=i+nt.x/at*n/Math.min(lt.width,lt.height),u=s+nt.y/ct*e/Math.min(lt.width,lt.height);Z.strokeStyle="red",Z.lineWidth=.5,Z.strokeRect(l,u,a,c);let h=Z.createLinearGradient(l,u,l+a,u+c);h.addColorStop(0,"rgba(255, 100, 100, 0.33)"),h.addColorStop(.5,"rgba(255, 100, 100, 0.1)"),h.addColorStop(1,"rgba(255, 100, 100, 0.3)"),Z.fillStyle=h,Z.fillRect(l,u,a,c);for(let e of o)e.draw(Z,t,vt);if(g(Z,t,vt),"move"===z){const t=20,e=3;Z.strokeStyle="white",Z.lineWidth=e,Z.beginPath(),Z.moveTo(vt.canvasPosition.x-t,vt.canvasPosition.y),Z.lineTo(vt.canvasPosition.x+t,vt.canvasPosition.y),Z.stroke(),Z.beginPath(),Z.moveTo(vt.canvasPosition.x,vt.canvasPosition.y-t),Z.lineTo(vt.canvasPosition.x,vt.canvasPosition.y+t),Z.stroke(),Z.strokeStyle="black",Z.lineWidth=1,Z.beginPath(),Z.moveTo(vt.canvasPosition.x-t-1,vt.canvasPosition.y),Z.lineTo(vt.canvasPosition.x+t+1,vt.canvasPosition.y),Z.stroke(),Z.beginPath(),Z.moveTo(vt.canvasPosition.x,vt.canvasPosition.y-t-1),Z.lineTo(vt.canvasPosition.x,vt.canvasPosition.y+t+1),Z.stroke()}else{Z.fillStyle="lightblue",Z.strokeStyle="black",Z.lineWidth=5;let t=Z.lineWidth/2;Z.beginPath(),Z.moveTo(vt.canvasPosition.x+t,vt.canvasPosition.y+t),Z.lineTo(vt.canvasPosition.x+t,vt.canvasPosition.y+45-t),Z.lineTo(vt.canvasPosition.x+15-t,vt.canvasPosition.y+30-t),Z.lineTo(vt.canvasPosition.x+37.5-t,vt.canvasPosition.y+30-t),Z.closePath(),Z.fill(),Z.stroke()}}(it),requestAnimationFrame(t)}(0),window.addEventListener("resize",_t)},9306:(t,e,n)=>{var r=n(4901),o=n(6823),i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not a function")}},3506:(t,e,n)=>{var r=n(3925),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw new i("Can't set "+o(t)+" as a prototype")}},7080:(t,e,n)=>{var r=n(4402).has;t.exports=function(t){return r(t),t}},8551:(t,e,n)=>{var r=n(34),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not an object")}},7811:t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7394:(t,e,n)=>{var r=n(4576),o=n(6706),i=n(2195),s=r.ArrayBuffer,a=r.TypeError;t.exports=s&&o(s.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==i(t))throw new a("ArrayBuffer expected");return t.byteLength}},3238:(t,e,n)=>{var r=n(4576),o=n(7476),i=n(7394),s=r.ArrayBuffer,a=s&&s.prototype,c=a&&o(a.slice);t.exports=function(t){if(0!==i(t))return!1;if(!c)return!1;try{return c(t,0,0),!1}catch(t){return!0}}},5169:(t,e,n)=>{var r=n(3238),o=TypeError;t.exports=function(t){if(r(t))throw new o("ArrayBuffer is detached");return t}},5636:(t,e,n)=>{var r=n(4576),o=n(9504),i=n(6706),s=n(7696),a=n(5169),c=n(7394),l=n(4483),u=n(1548),h=r.structuredClone,p=r.ArrayBuffer,d=r.DataView,f=Math.min,y=p.prototype,v=d.prototype,g=o(y.slice),m=i(y,"resizable","get"),x=i(y,"maxByteLength","get"),w=o(v.getInt8),b=o(v.setInt8);t.exports=(u||l)&&function(t,e,n){var r,o=c(t),i=void 0===e?o:s(e),y=!m||!m(t);if(a(t),u&&(t=h(t,{transfer:[t]}),o===i&&(n||y)))return t;if(o>=i&&(!n||y))r=g(t,0,i);else{var v=n&&!y&&x?{maxByteLength:x(t)}:void 0;r=new p(i,v);for(var E=new d(t),P=new d(r),S=f(i,o),M=0;M<S;M++)b(P,M,w(E,M))}return u||l(t),r}},4644:(t,e,n)=>{var r,o,i,s=n(7811),a=n(3724),c=n(4576),l=n(4901),u=n(34),h=n(9297),p=n(6955),d=n(6823),f=n(6699),y=n(6840),v=n(2106),g=n(1625),m=n(2787),x=n(2967),w=n(8227),b=n(3392),E=n(1181),P=E.enforce,S=E.get,M=c.Int8Array,O=M&&M.prototype,T=c.Uint8ClampedArray,_=T&&T.prototype,A=M&&m(M),I=O&&m(O),L=Object.prototype,k=c.TypeError,D=w("toStringTag"),R=b("TYPED_ARRAY_TAG"),H="TypedArrayConstructor",C=s&&!!x&&"Opera"!==p(c.opera),j=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},z=function(t){var e=m(t);if(u(e)){var n=S(e);return n&&h(n,H)?n[H]:z(e)}},W=function(t){if(!u(t))return!1;var e=p(t);return h(N,e)||h(B,e)};for(r in N)(i=(o=c[r])&&o.prototype)?P(i)[H]=o:C=!1;for(r in B)(i=(o=c[r])&&o.prototype)&&(P(i)[H]=o);if((!C||!l(A)||A===Function.prototype)&&(A=function(){throw new k("Incorrect invocation")},C))for(r in N)c[r]&&x(c[r],A);if((!C||!I||I===L)&&(I=A.prototype,C))for(r in N)c[r]&&x(c[r].prototype,I);if(C&&m(_)!==I&&x(_,I),a&&!h(I,D))for(r in j=!0,v(I,D,{configurable:!0,get:function(){return u(this)?this[R]:void 0}}),N)c[r]&&f(c[r],R,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:C,TYPED_ARRAY_TAG:j&&R,aTypedArray:function(t){if(W(t))return t;throw new k("Target is not a typed array")},aTypedArrayConstructor:function(t){if(l(t)&&(!x||g(A,t)))return t;throw new k(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,r){if(a){if(n)for(var o in N){var i=c[o];if(i&&h(i.prototype,t))try{delete i.prototype[t]}catch(n){try{i.prototype[t]=e}catch(t){}}}I[t]&&!n||y(I,t,n?e:C&&O[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,n){var r,o;if(a){if(x){if(n)for(r in N)if((o=c[r])&&h(o,t))try{delete o[t]}catch(t){}if(A[t]&&!n)return;try{return y(A,t,n?e:C&&A[t]||e)}catch(t){}}for(r in N)!(o=c[r])||o[t]&&!n||y(o,t,e)}},getTypedArrayConstructor:z,isView:function(t){if(!u(t))return!1;var e=p(t);return"DataView"===e||h(N,e)||h(B,e)},isTypedArray:W,TypedArray:A,TypedArrayPrototype:I}},5370:(t,e,n)=>{var r=n(6198);t.exports=function(t,e,n){for(var o=0,i=arguments.length>2?n:r(e),s=new t(i);i>o;)s[o]=e[o++];return s}},9617:(t,e,n)=>{var r=n(5397),o=n(5610),i=n(6198),s=function(t){return function(e,n,s){var a=r(e),c=i(a);if(0===c)return!t&&-1;var l,u=o(s,c);if(t&&n!=n){for(;c>u;)if((l=a[u++])!=l)return!0}else for(;c>u;u++)if((t||u in a)&&a[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},4527:(t,e,n)=>{var r=n(3724),o=n(4376),i=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(o(t)&&!s(t,"length").writable)throw new i("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},7628:(t,e,n)=>{var r=n(6198);t.exports=function(t,e){for(var n=r(t),o=new e(n),i=0;i<n;i++)o[i]=t[n-i-1];return o}},9928:(t,e,n)=>{var r=n(6198),o=n(1291),i=RangeError;t.exports=function(t,e,n,s){var a=r(t),c=o(n),l=c<0?a+c:c;if(l>=a||l<0)throw new i("Incorrect index");for(var u=new e(a),h=0;h<a;h++)u[h]=h===l?s:t[h];return u}},2195:(t,e,n)=>{var r=n(9504),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},6955:(t,e,n)=>{var r=n(2140),o=n(4901),i=n(2195),s=n(8227)("toStringTag"),a=Object,c="Arguments"===i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?n:c?i(e):"Object"===(r=i(e))&&o(e.callee)?"Arguments":r}},7740:(t,e,n)=>{var r=n(9297),o=n(5031),i=n(7347),s=n(4913);t.exports=function(t,e,n){for(var a=o(e),c=s.f,l=i.f,u=0;u<a.length;u++){var h=a[u];r(t,h)||n&&r(n,h)||c(t,h,l(e,h))}}},2211:(t,e,n)=>{var r=n(9039);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},6699:(t,e,n)=>{var r=n(3724),o=n(4913),i=n(6980);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},6980:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2106:(t,e,n)=>{var r=n(283),o=n(4913);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),o.f(t,e,n)}},6840:(t,e,n)=>{var r=n(4901),o=n(4913),i=n(283),s=n(9433);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(r(n)&&i(n,l,a),a.global)c?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=n:o.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},9433:(t,e,n)=>{var r=n(4576),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},3724:(t,e,n)=>{var r=n(9039);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4483:(t,e,n)=>{var r,o,i,s,a=n(4576),c=n(9429),l=n(1548),u=a.structuredClone,h=a.ArrayBuffer,p=a.MessageChannel,d=!1;if(l)d=function(t){u(t,{transfer:[t]})};else if(h)try{p||(r=c("worker_threads"))&&(p=r.MessageChannel),p&&(o=new p,i=new h(2),s=function(t){o.port1.postMessage(null,[t])},2===i.byteLength&&(s(i),0===i.byteLength&&(d=s)))}catch(t){}t.exports=d},4055:(t,e,n)=>{var r=n(4576),o=n(34),i=r.document,s=o(i)&&o(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},6837:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8727:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6193:(t,e,n)=>{var r=n(4215);t.exports="NODE"===r},2839:(t,e,n)=>{var r=n(4576).navigator,o=r&&r.userAgent;t.exports=o?String(o):""},9519:(t,e,n)=>{var r,o,i=n(4576),s=n(2839),a=i.process,c=i.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(o=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},4215:(t,e,n)=>{var r=n(4576),o=n(2839),i=n(2195),s=function(t){return o.slice(0,t.length)===t};t.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":r.Bun&&"string"==typeof Bun.version?"BUN":r.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(r.process)?"NODE":r.window&&r.document?"BROWSER":"REST"},6518:(t,e,n)=>{var r=n(4576),o=n(7347).f,i=n(6699),s=n(6840),a=n(9433),c=n(7740),l=n(2796);t.exports=function(t,e){var n,u,h,p,d,f=t.target,y=t.global,v=t.stat;if(n=y?r:v?r[f]||a(f,{}):r[f]&&r[f].prototype)for(u in e){if(p=e[u],h=t.dontCallGetSet?(d=o(n,u))&&d.value:n[u],!l(y?u:f+(v?".":"#")+u,t.forced)&&void 0!==h){if(typeof p==typeof h)continue;c(p,h)}(t.sham||h&&h.sham)&&i(p,"sham",!0),s(n,u,p,t)}}},9039:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},616:(t,e,n)=>{var r=n(9039);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},9565:(t,e,n)=>{var r=n(616),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},350:(t,e,n)=>{var r=n(3724),o=n(9297),i=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=o(i,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&s(i,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},6706:(t,e,n)=>{var r=n(9504),o=n(9306);t.exports=function(t,e,n){try{return r(o(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},7476:(t,e,n)=>{var r=n(2195),o=n(9504);t.exports=function(t){if("Function"===r(t))return o(t)}},9504:(t,e,n)=>{var r=n(616),o=Function.prototype,i=o.call,s=r&&o.bind.bind(i,i);t.exports=r?s:function(t){return function(){return i.apply(t,arguments)}}},9429:(t,e,n)=>{var r=n(4576),o=n(6193);t.exports=function(t){if(o){try{return r.process.getBuiltinModule(t)}catch(t){}try{return Function('return require("'+t+'")')()}catch(t){}}}},7751:(t,e,n)=>{var r=n(4576),o=n(4901);t.exports=function(t,e){return arguments.length<2?(n=r[t],o(n)?n:void 0):r[t]&&r[t][e];var n}},1767:t=>{t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},5966:(t,e,n)=>{var r=n(9306),o=n(4117);t.exports=function(t,e){var n=t[e];return o(n)?void 0:r(n)}},3789:(t,e,n)=>{var r=n(9306),o=n(8551),i=n(9565),s=n(1291),a=n(1767),c="Invalid size",l=RangeError,u=TypeError,h=Math.max,p=function(t,e){this.set=t,this.size=h(e,0),this.has=r(t.has),this.keys=r(t.keys)};p.prototype={getIterator:function(){return a(o(i(this.keys,this.set)))},includes:function(t){return i(this.has,this.set,t)}},t.exports=function(t){o(t);var e=+t.size;if(e!=e)throw new u(c);var n=s(e);if(n<0)throw new l(c);return new p(t,n)}},4576:function(t,e,n){var r=function(t){return t&&t.Math===Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:(t,e,n)=>{var r=n(9504),o=n(8981),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},421:t=>{t.exports={}},5917:(t,e,n)=>{var r=n(3724),o=n(9039),i=n(4055);t.exports=!r&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},7055:(t,e,n)=>{var r=n(9504),o=n(9039),i=n(2195),s=Object,a=r("".split);t.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===i(t)?a(t,""):s(t)}:s},3706:(t,e,n)=>{var r=n(9504),o=n(4901),i=n(7629),s=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return s(t)}),t.exports=i.inspectSource},1181:(t,e,n)=>{var r,o,i,s=n(8622),a=n(4576),c=n(34),l=n(6699),u=n(9297),h=n(7629),p=n(6119),d=n(421),f="Object already initialized",y=a.TypeError,v=a.WeakMap;if(s||h.state){var g=h.state||(h.state=new v);g.get=g.get,g.has=g.has,g.set=g.set,r=function(t,e){if(g.has(t))throw new y(f);return e.facade=t,g.set(t,e),e},o=function(t){return g.get(t)||{}},i=function(t){return g.has(t)}}else{var m=p("state");d[m]=!0,r=function(t,e){if(u(t,m))throw new y(f);return e.facade=t,l(t,m,e),e},o=function(t){return u(t,m)?t[m]:{}},i=function(t){return u(t,m)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=o(e)).type!==t)throw new y("Incompatible receiver, "+t+" required");return n}}}},4376:(t,e,n)=>{var r=n(2195);t.exports=Array.isArray||function(t){return"Array"===r(t)}},1108:(t,e,n)=>{var r=n(6955);t.exports=function(t){var e=r(t);return"BigInt64Array"===e||"BigUint64Array"===e}},4901:t=>{var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},2796:(t,e,n)=>{var r=n(9039),o=n(4901),i=/#|\.prototype\./,s=function(t,e){var n=c[a(t)];return n===u||n!==l&&(o(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},4117:t=>{t.exports=function(t){return null==t}},34:(t,e,n)=>{var r=n(4901);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},3925:(t,e,n)=>{var r=n(34);t.exports=function(t){return r(t)||null===t}},6395:t=>{t.exports=!1},757:(t,e,n)=>{var r=n(7751),o=n(4901),i=n(1625),s=n(7040),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return o(e)&&i(e.prototype,a(t))}},507:(t,e,n)=>{var r=n(9565);t.exports=function(t,e,n){for(var o,i,s=n?t:t.iterator,a=t.next;!(o=r(a,s)).done;)if(void 0!==(i=e(o.value)))return i}},9539:(t,e,n)=>{var r=n(9565),o=n(8551),i=n(5966);t.exports=function(t,e,n){var s,a;o(t);try{if(!(s=i(t,"return"))){if("throw"===e)throw n;return n}s=r(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw n;if(a)throw s;return o(s),n}},6198:(t,e,n)=>{var r=n(8014);t.exports=function(t){return r(t.length)}},283:(t,e,n)=>{var r=n(9504),o=n(9039),i=n(4901),s=n(9297),a=n(3724),c=n(350).CONFIGURABLE,l=n(3706),u=n(1181),h=u.enforce,p=u.get,d=String,f=Object.defineProperty,y=r("".slice),v=r("".replace),g=r([].join),m=a&&!o((function(){return 8!==f((function(){}),"length",{value:8}).length})),x=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===y(d(e),0,7)&&(e="["+v(d(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||c&&t.name!==e)&&(a?f(t,"name",{value:e,configurable:!0}):t.name=e),m&&n&&s(n,"arity")&&t.length!==n.arity&&f(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=h(t);return s(r,"source")||(r.source=g(x,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return i(this)&&p(this).source||l(this)}),"toString")},741:t=>{var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},4913:(t,e,n)=>{var r=n(3724),o=n(5917),i=n(8686),s=n(8551),a=n(6969),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",d="writable";e.f=r?i?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&d in n&&!n[d]){var r=u(t,e);r&&r[d]&&(t[e]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:h in n?n[h]:r[h],writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(s(t),e=a(e),s(n),o)try{return l(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},7347:(t,e,n)=>{var r=n(3724),o=n(9565),i=n(8773),s=n(6980),a=n(5397),c=n(6969),l=n(9297),u=n(5917),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=c(e),u)try{return h(t,e)}catch(t){}if(l(t,e))return s(!o(i.f,t,e),t[e])}},8480:(t,e,n)=>{var r=n(1828),o=n(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},3717:(t,e)=>{e.f=Object.getOwnPropertySymbols},2787:(t,e,n)=>{var r=n(9297),o=n(4901),i=n(8981),s=n(6119),a=n(2211),c=s("IE_PROTO"),l=Object,u=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=i(t);if(r(e,c))return e[c];var n=e.constructor;return o(n)&&e instanceof n?n.prototype:e instanceof l?u:null}},1625:(t,e,n)=>{var r=n(9504);t.exports=r({}.isPrototypeOf)},1828:(t,e,n)=>{var r=n(9504),o=n(9297),i=n(5397),s=n(9617).indexOf,a=n(421),c=r([].push);t.exports=function(t,e){var n,r=i(t),l=0,u=[];for(n in r)!o(a,n)&&o(r,n)&&c(u,n);for(;e.length>l;)o(r,n=e[l++])&&(~s(u,n)||c(u,n));return u}},8773:(t,e)=>{var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},2967:(t,e,n)=>{var r=n(6706),o=n(34),i=n(7750),s=n(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return i(n),s(r),o(n)?(e?t(n,r):n.__proto__=r,n):n}}():void 0)},4270:(t,e,n)=>{var r=n(9565),o=n(4901),i=n(34),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&o(n=t.toString)&&!i(a=r(n,t)))return a;if(o(n=t.valueOf)&&!i(a=r(n,t)))return a;if("string"!==e&&o(n=t.toString)&&!i(a=r(n,t)))return a;throw new s("Can't convert object to primitive value")}},5031:(t,e,n)=>{var r=n(7751),o=n(9504),i=n(8480),s=n(3717),a=n(8551),c=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=s.f;return n?c(e,n(t)):e}},7750:(t,e,n)=>{var r=n(4117),o=TypeError;t.exports=function(t){if(r(t))throw new o("Can't call method on "+t);return t}},9286:(t,e,n)=>{var r=n(4402),o=n(8469),i=r.Set,s=r.add;t.exports=function(t){var e=new i;return o(t,(function(t){s(e,t)})),e}},3440:(t,e,n)=>{var r=n(7080),o=n(4402),i=n(9286),s=n(5170),a=n(3789),c=n(8469),l=n(507),u=o.has,h=o.remove;t.exports=function(t){var e=r(this),n=a(t),o=i(e);return s(e)<=n.size?c(e,(function(t){n.includes(t)&&h(o,t)})):l(n.getIterator(),(function(t){u(e,t)&&h(o,t)})),o}},4402:(t,e,n)=>{var r=n(9504),o=Set.prototype;t.exports={Set,add:r(o.add),has:r(o.has),remove:r(o.delete),proto:o}},8750:(t,e,n)=>{var r=n(7080),o=n(4402),i=n(5170),s=n(3789),a=n(8469),c=n(507),l=o.Set,u=o.add,h=o.has;t.exports=function(t){var e=r(this),n=s(t),o=new l;return i(e)>n.size?c(n.getIterator(),(function(t){h(e,t)&&u(o,t)})):a(e,(function(t){n.includes(t)&&u(o,t)})),o}},4449:(t,e,n)=>{var r=n(7080),o=n(4402).has,i=n(5170),s=n(3789),a=n(8469),c=n(507),l=n(9539);t.exports=function(t){var e=r(this),n=s(t);if(i(e)<=n.size)return!1!==a(e,(function(t){if(n.includes(t))return!1}),!0);var u=n.getIterator();return!1!==c(u,(function(t){if(o(e,t))return l(u,"normal",!1)}))}},3838:(t,e,n)=>{var r=n(7080),o=n(5170),i=n(8469),s=n(3789);t.exports=function(t){var e=r(this),n=s(t);return!(o(e)>n.size)&&!1!==i(e,(function(t){if(!n.includes(t))return!1}),!0)}},8527:(t,e,n)=>{var r=n(7080),o=n(4402).has,i=n(5170),s=n(3789),a=n(507),c=n(9539);t.exports=function(t){var e=r(this),n=s(t);if(i(e)<n.size)return!1;var l=n.getIterator();return!1!==a(l,(function(t){if(!o(e,t))return c(l,"normal",!1)}))}},8469:(t,e,n)=>{var r=n(9504),o=n(507),i=n(4402),s=i.Set,a=i.proto,c=r(a.forEach),l=r(a.keys),u=l(new s).next;t.exports=function(t,e,n){return n?o({iterator:l(t),next:u},e):c(t,e)}},4916:(t,e,n)=>{var r=n(7751),o=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};t.exports=function(t){var e=r("Set");try{(new e)[t](o(0));try{return(new e)[t](o(-1)),!1}catch(t){return!0}}catch(t){return!1}}},5170:(t,e,n)=>{var r=n(6706),o=n(4402);t.exports=r(o.proto,"size","get")||function(t){return t.size}},3650:(t,e,n)=>{var r=n(7080),o=n(4402),i=n(9286),s=n(3789),a=n(507),c=o.add,l=o.has,u=o.remove;t.exports=function(t){var e=r(this),n=s(t).getIterator(),o=i(e);return a(n,(function(t){l(e,t)?u(o,t):c(o,t)})),o}},4204:(t,e,n)=>{var r=n(7080),o=n(4402).add,i=n(9286),s=n(3789),a=n(507);t.exports=function(t){var e=r(this),n=s(t).getIterator(),c=i(e);return a(n,(function(t){o(c,t)})),c}},6119:(t,e,n)=>{var r=n(5745),o=n(3392),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},7629:(t,e,n)=>{var r=n(6395),o=n(4576),i=n(9433),s="__core-js_shared__",a=t.exports=o[s]||i(s,{});(a.versions||(a.versions=[])).push({version:"3.38.1",mode:r?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:(t,e,n)=>{var r=n(7629);t.exports=function(t,e){return r[t]||(r[t]=e||{})}},1548:(t,e,n)=>{var r=n(4576),o=n(9039),i=n(9519),s=n(4215),a=r.structuredClone;t.exports=!!a&&!o((function(){if("DENO"===s&&i>92||"NODE"===s&&i>94||"BROWSER"===s&&i>97)return!1;var t=new ArrayBuffer(8),e=a(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength}))},4495:(t,e,n)=>{var r=n(9519),o=n(9039),i=n(4576).String;t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},5610:(t,e,n)=>{var r=n(1291),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},5854:(t,e,n)=>{var r=n(2777),o=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw new o("Can't convert number to bigint");return BigInt(e)}},7696:(t,e,n)=>{var r=n(1291),o=n(8014),i=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=o(e);if(e!==n)throw new i("Wrong length or index");return n}},5397:(t,e,n)=>{var r=n(7055),o=n(7750);t.exports=function(t){return r(o(t))}},1291:(t,e,n)=>{var r=n(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},8014:(t,e,n)=>{var r=n(1291),o=Math.min;t.exports=function(t){var e=r(t);return e>0?o(e,9007199254740991):0}},8981:(t,e,n)=>{var r=n(7750),o=Object;t.exports=function(t){return o(r(t))}},2777:(t,e,n)=>{var r=n(9565),o=n(34),i=n(757),s=n(5966),a=n(4270),c=n(8227),l=TypeError,u=c("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var n,c=s(t,u);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!o(n)||i(n))return n;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},6969:(t,e,n)=>{var r=n(2777),o=n(757);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},2140:(t,e,n)=>{var r={};r[n(8227)("toStringTag")]="z",t.exports="[object z]"===String(r)},6823:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},3392:(t,e,n)=>{var r=n(9504),o=0,i=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++o+i,36)}},7040:(t,e,n)=>{var r=n(4495);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:(t,e,n)=>{var r=n(3724),o=n(9039);t.exports=r&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8622:(t,e,n)=>{var r=n(4576),o=n(4901),i=r.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},8227:(t,e,n)=>{var r=n(4576),o=n(5745),i=n(9297),s=n(3392),a=n(4495),c=n(7040),l=r.Symbol,u=o("wks"),h=c?l.for||l:l&&l.withoutSetter||s;t.exports=function(t){return i(u,t)||(u[t]=a&&i(l,t)?l[t]:h("Symbol."+t)),u[t]}},6573:(t,e,n)=>{var r=n(3724),o=n(2106),i=n(3238),s=ArrayBuffer.prototype;r&&!("detached"in s)&&o(s,"detached",{configurable:!0,get:function(){return i(this)}})},7936:(t,e,n)=>{var r=n(6518),o=n(5636);o&&r({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return o(this,arguments.length?arguments[0]:void 0,!1)}})},8100:(t,e,n)=>{var r=n(6518),o=n(5636);o&&r({target:"ArrayBuffer",proto:!0},{transfer:function(){return o(this,arguments.length?arguments[0]:void 0,!0)}})},4114:(t,e,n)=>{var r=n(6518),o=n(8981),i=n(6198),s=n(4527),a=n(6837);r({target:"Array",proto:!0,arity:1,forced:n(9039)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=o(this),n=i(e),r=arguments.length;a(n+r);for(var c=0;c<r;c++)e[n]=arguments[c],n++;return s(e,n),n}})},7642:(t,e,n)=>{var r=n(6518),o=n(3440);r({target:"Set",proto:!0,real:!0,forced:!n(4916)("difference")},{difference:o})},8004:(t,e,n)=>{var r=n(6518),o=n(9039),i=n(8750);r({target:"Set",proto:!0,real:!0,forced:!n(4916)("intersection")||o((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}))},{intersection:i})},3853:(t,e,n)=>{var r=n(6518),o=n(4449);r({target:"Set",proto:!0,real:!0,forced:!n(4916)("isDisjointFrom")},{isDisjointFrom:o})},5876:(t,e,n)=>{var r=n(6518),o=n(3838);r({target:"Set",proto:!0,real:!0,forced:!n(4916)("isSubsetOf")},{isSubsetOf:o})},2475:(t,e,n)=>{var r=n(6518),o=n(8527);r({target:"Set",proto:!0,real:!0,forced:!n(4916)("isSupersetOf")},{isSupersetOf:o})},5024:(t,e,n)=>{var r=n(6518),o=n(3650);r({target:"Set",proto:!0,real:!0,forced:!n(4916)("symmetricDifference")},{symmetricDifference:o})},1698:(t,e,n)=>{var r=n(6518),o=n(4204);r({target:"Set",proto:!0,real:!0,forced:!n(4916)("union")},{union:o})},7467:(t,e,n)=>{var r=n(7628),o=n(4644),i=o.aTypedArray,s=o.exportTypedArrayMethod,a=o.getTypedArrayConstructor;s("toReversed",(function(){return r(i(this),a(this))}))},4732:(t,e,n)=>{var r=n(4644),o=n(9504),i=n(9306),s=n(5370),a=r.aTypedArray,c=r.getTypedArrayConstructor,l=r.exportTypedArrayMethod,u=o(r.TypedArrayPrototype.sort);l("toSorted",(function(t){void 0!==t&&i(t);var e=a(this),n=s(c(e),e);return u(n,t)}))},9577:(t,e,n)=>{var r=n(9928),o=n(4644),i=n(1108),s=n(1291),a=n(5854),c=o.aTypedArray,l=o.getTypedArrayConstructor,u=o.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var n=c(this),o=s(t),u=i(n)?a(e):+e;return r(n,l(n),o,u)}}.with,!h)},3375:(t,e,n)=>{n(7642)},9225:(t,e,n)=>{n(8004)},3972:(t,e,n)=>{n(3853)},9209:(t,e,n)=>{n(5876)},5714:(t,e,n)=>{n(2475)},7561:(t,e,n)=>{n(5024)},6197:(t,e,n)=>{n(1698)}},r={};function o(t){var e=r[t];if(void 0!==e){if(void 0!==e.error)throw e.error;return e.exports}var i=r[t]={exports:{}};try{var s={id:t,module:i,factory:n[t],require:o};o.i.forEach((function(t){t(s)})),i=s.module,s.factory.call(i.exports,i,i.exports,s.require)}catch(t){throw i.error=t,t}return i.exports}o.m=n,o.c=r,o.i=[],o.hu=t=>t+"."+o.h()+".hot-update.js",o.hmrF=()=>"main."+o.h()+".hot-update.json",o.h=()=>"fc918f3f20f0fcfcb75b",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="civ:",o.l=(n,r,i,s)=>{if(t[n])t[n].push(r);else{var a,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==e+i){a=h;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",e+i),a.src=n),t[n]=[r];var p=(e,r)=>{a.onerror=a.onload=null,clearTimeout(d);var o=t[n];if(delete t[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((t=>t(r))),e)return e(r)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),c&&document.head.appendChild(a)}},(()=>{var t,e,n,r={},i=o.c,s=[],a=[],c="idle",l=0,u=[];function h(t){c=t;for(var e=[],n=0;n<a.length;n++)e[n]=a[n].call(null,t);return Promise.all(e).then((function(){}))}function p(){0==--l&&h("ready").then((function(){if(0===l){var t=u;u=[];for(var e=0;e<t.length;e++)t[e]()}}))}function d(t){if("idle"!==c)throw new Error("check() is only allowed in idle status");return h("check").then(o.hmrM).then((function(n){return n?h("prepare").then((function(){var r=[];return e=[],Promise.all(Object.keys(o.hmrC).reduce((function(t,i){return o.hmrC[i](n.c,n.r,n.m,t,e,r),t}),[])).then((function(){return e=function(){return t?y(t):h("ready").then((function(){return r}))},0===l?e():new Promise((function(t){u.push((function(){t(e())}))}));var e}))})):h(v()?"ready":"idle").then((function(){return null}))}))}function f(t){return"ready"!==c?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+c+")")})):y(t)}function y(t){t=t||{},v();var r=e.map((function(e){return e(t)}));e=void 0;var o=r.map((function(t){return t.error})).filter(Boolean);if(o.length>0)return h("abort").then((function(){throw o[0]}));var i=h("dispose");r.forEach((function(t){t.dispose&&t.dispose()}));var s,a=h("apply"),c=function(t){s||(s=t)},l=[];return r.forEach((function(t){if(t.apply){var e=t.apply(c);if(e)for(var n=0;n<e.length;n++)l.push(e[n])}})),Promise.all([i,a]).then((function(){return s?h("fail").then((function(){throw s})):n?y(t).then((function(t){return l.forEach((function(e){t.indexOf(e)<0&&t.push(e)})),t})):h("idle").then((function(){return l}))}))}function v(){if(n)return e||(e=[]),Object.keys(o.hmrI).forEach((function(t){n.forEach((function(n){o.hmrI[t](n,e)}))})),n=void 0,!0}o.hmrD=r,o.i.push((function(u){var y,v,g,m,x=u.module,w=function(e,n){var r=i[n];if(!r)return e;var o=function(o){if(r.hot.active){if(i[o]){var a=i[o].parents;-1===a.indexOf(n)&&a.push(n)}else s=[n],t=o;-1===r.children.indexOf(o)&&r.children.push(o)}else console.warn("[HMR] unexpected require("+o+") from disposed module "+n),s=[];return e(o)},a=function(t){return{configurable:!0,enumerable:!0,get:function(){return e[t]},set:function(n){e[t]=n}}};for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&"e"!==u&&Object.defineProperty(o,u,a(u));return o.e=function(t,n){return function(t){switch(c){case"ready":h("prepare");case"prepare":return l++,t.then(p,p),t;default:return t}}(e.e(t,n))},o}(u.require,u.id);x.hot=(y=u.id,v=x,m={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:g=t!==y,_requireSelf:function(){s=v.parents.slice(),t=g?void 0:y,o(y)},active:!0,accept:function(t,e,n){if(void 0===t)m._selfAccepted=!0;else if("function"==typeof t)m._selfAccepted=t;else if("object"==typeof t&&null!==t)for(var r=0;r<t.length;r++)m._acceptedDependencies[t[r]]=e||function(){},m._acceptedErrorHandlers[t[r]]=n;else m._acceptedDependencies[t]=e||function(){},m._acceptedErrorHandlers[t]=n},decline:function(t){if(void 0===t)m._selfDeclined=!0;else if("object"==typeof t&&null!==t)for(var e=0;e<t.length;e++)m._declinedDependencies[t[e]]=!0;else m._declinedDependencies[t]=!0},dispose:function(t){m._disposeHandlers.push(t)},addDisposeHandler:function(t){m._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=m._disposeHandlers.indexOf(t);e>=0&&m._disposeHandlers.splice(e,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":e=[],Object.keys(o.hmrI).forEach((function(t){o.hmrI[t](y,e)})),h("ready");break;case"ready":Object.keys(o.hmrI).forEach((function(t){o.hmrI[t](y,e)}));break;case"prepare":case"check":case"dispose":case"apply":(n=n||[]).push(y)}},check:d,apply:f,status:function(t){if(!t)return c;a.push(t)},addStatusHandler:function(t){a.push(t)},removeStatusHandler:function(t){var e=a.indexOf(t);e>=0&&a.splice(e,1)},data:r[y]},t=void 0,m),x.parents=s,x.children=[],s=[],u.require=w})),o.hmrC={},o.hmrI={}})(),(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t,e,n,r,i,s=o.hmrS_jsonp=o.hmrS_jsonp||{792:0},a={};function c(e,n){return t=n,new Promise(((t,n)=>{a[e]=t;var r=o.p+o.hu(e),i=new Error;o.l(r,(t=>{if(a[e]){a[e]=void 0;var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;i.message="Loading hot update chunk "+e+" failed.\n("+r+": "+o+")",i.name="ChunkLoadError",i.type=r,i.request=o,n(i)}}))}))}function l(t){function a(t){for(var e=[t],n={},r=e.map((function(t){return{chain:[t],id:t}}));r.length>0;){var i=r.pop(),s=i.id,a=i.chain,l=o.c[s];if(l&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:s};if(l.hot._main)return{type:"unaccepted",chain:a,moduleId:s};for(var u=0;u<l.parents.length;u++){var h=l.parents[u],p=o.c[h];if(p){if(p.hot._declinedDependencies[s])return{type:"declined",chain:a.concat([h]),moduleId:s,parentId:h};-1===e.indexOf(h)&&(p.hot._acceptedDependencies[s]?(n[h]||(n[h]=[]),c(n[h],[s])):(delete n[h],e.push(h),r.push({chain:a.concat([h]),id:h})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:n}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];-1===t.indexOf(r)&&t.push(r)}}o.f&&delete o.f.jsonpHmr,e=void 0;var l={},u=[],h={},p=function(t){console.warn("[HMR] unexpected require("+t.id+") to disposed module")};for(var d in n)if(o.o(n,d)){var f=n[d],y=f?a(d):{type:"disposed",moduleId:d},v=!1,g=!1,m=!1,x="";switch(y.chain&&(x="\nUpdate propagation: "+y.chain.join(" -> ")),y.type){case"self-declined":t.onDeclined&&t.onDeclined(y),t.ignoreDeclined||(v=new Error("Aborted because of self decline: "+y.moduleId+x));break;case"declined":t.onDeclined&&t.onDeclined(y),t.ignoreDeclined||(v=new Error("Aborted because of declined dependency: "+y.moduleId+" in "+y.parentId+x));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(y),t.ignoreUnaccepted||(v=new Error("Aborted because "+d+" is not accepted"+x));break;case"accepted":t.onAccepted&&t.onAccepted(y),g=!0;break;case"disposed":t.onDisposed&&t.onDisposed(y),m=!0;break;default:throw new Error("Unexception type "+y.type)}if(v)return{error:v};if(g)for(d in h[d]=f,c(u,y.outdatedModules),y.outdatedDependencies)o.o(y.outdatedDependencies,d)&&(l[d]||(l[d]=[]),c(l[d],y.outdatedDependencies[d]));m&&(c(u,[y.moduleId]),h[d]=p)}n=void 0;for(var w,b=[],E=0;E<u.length;E++){var P=u[E],S=o.c[P];S&&(S.hot._selfAccepted||S.hot._main)&&h[P]!==p&&!S.hot._selfInvalidated&&b.push({module:P,require:S.hot._requireSelf,errorHandler:S.hot._selfAccepted})}return{dispose:function(){var t;r.forEach((function(t){delete s[t]})),r=void 0;for(var e,n=u.slice();n.length>0;){var i=n.pop(),a=o.c[i];if(a){var c={},h=a.hot._disposeHandlers;for(E=0;E<h.length;E++)h[E].call(null,c);for(o.hmrD[i]=c,a.hot.active=!1,delete o.c[i],delete l[i],E=0;E<a.children.length;E++){var p=o.c[a.children[E]];p&&(t=p.parents.indexOf(i))>=0&&p.parents.splice(t,1)}}}for(var d in l)if(o.o(l,d)&&(a=o.c[d]))for(w=l[d],E=0;E<w.length;E++)e=w[E],(t=a.children.indexOf(e))>=0&&a.children.splice(t,1)},apply:function(e){for(var n in h)o.o(h,n)&&(o.m[n]=h[n]);for(var r=0;r<i.length;r++)i[r](o);for(var s in l)if(o.o(l,s)){var a=o.c[s];if(a){w=l[s];for(var c=[],p=[],d=[],f=0;f<w.length;f++){var y=w[f],v=a.hot._acceptedDependencies[y],g=a.hot._acceptedErrorHandlers[y];if(v){if(-1!==c.indexOf(v))continue;c.push(v),p.push(g),d.push(y)}}for(var m=0;m<c.length;m++)try{c[m].call(null,w)}catch(n){if("function"==typeof p[m])try{p[m](n,{moduleId:s,dependencyId:d[m]})}catch(r){t.onErrored&&t.onErrored({type:"accept-error-handler-errored",moduleId:s,dependencyId:d[m],error:r,originalError:n}),t.ignoreErrored||(e(r),e(n))}else t.onErrored&&t.onErrored({type:"accept-errored",moduleId:s,dependencyId:d[m],error:n}),t.ignoreErrored||e(n)}}}for(var x=0;x<b.length;x++){var E=b[x],P=E.module;try{E.require(P)}catch(n){if("function"==typeof E.errorHandler)try{E.errorHandler(n,{moduleId:P,module:o.c[P]})}catch(r){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:P,error:r,originalError:n}),t.ignoreErrored||(e(r),e(n))}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:P,error:n}),t.ignoreErrored||e(n)}}return u}}}self.webpackHotUpdateciv=(e,r,s)=>{for(var c in r)o.o(r,c)&&(n[c]=r[c],t&&t.push(c));s&&i.push(s),a[e]&&(a[e](),a[e]=void 0)},o.hmrI.jsonp=function(t,e){n||(n={},i=[],r=[],e.push(l)),o.o(n,t)||(n[t]=o.m[t])},o.hmrC.jsonp=function(t,a,u,h,p,d){p.push(l),e={},r=a,n=u.reduce((function(t,e){return t[e]=!1,t}),{}),i=[],t.forEach((function(t){o.o(s,t)&&void 0!==s[t]?(h.push(c(t,d)),e[t]=!0):e[t]=!1})),o.f&&(o.f.jsonpHmr=function(t,n){e&&o.o(e,t)&&!e[t]&&(n.push(c(t)),e[t]=!0)})},o.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(o.p+o.hmrF()).then((t=>{if(404!==t.status){if(!t.ok)throw new Error("Failed to fetch update manifest "+t.statusText);return t.json()}}))}})(),o(6895)})();